!function e(t,a,n){function r(i,l){if(!a[i]){if(!t[i]){var o="function"==typeof require&&require;if(!l&&o)return o(i,!0);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var m=a[i]={exports:{}};t[i][0].call(m.exports,function(e){var a=t[i][1][e];return r(a||e)},m,m.exports,e,t,a,n)}return a[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/actions/index.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){return{type:S}}function s(e){return{type:M,data:e}}function i(e){return{type:O,data:e}}function l(e){return{type:I,data:e}}function o(e){return{type:D,data:e}}function c(e){return{type:R,data:e}}function m(e){return{type:L,data:e}}function u(e){return{type:F,data:e}}function d(e){return function(t){P.default.registerDispatch(function(a){t(s(a)),e&&"function"==typeof e&&e()})}}function p(){return function(e){b("projects",function(t){return e(i(t))})}}function h(e){if(!e)throw new Error("Project endpoint requires project id");return function(t){b("projects/"+e,function(e){return t(l(e))})}}function f(){return function(e){b("indicators",function(t){return e(o(t))})}}function g(e){if(!e)throw new Error("Indicator endpoint requires indicator id");return function(t){b("indicators/"+e,function(e){return t(c(e))})}}function y(e){var t=e===C.GOVERNORATE?z:H;return function(a){(0,_.default)(k.default.resolve(x.baseUrl,t),function(t){try{var n=N.feature(t,t.objects[e])}catch(e){return void console.log("Topojson.feature() failed")}return a(m({features:n,name:e}))})}}function b(e,t){var a={url:k.default.resolve(x.api,e),method:"GET",type:"json",contentType:"application/json",success:t,error:function(e){throw new Error(e)}},n=j.default.get("id_token");return n&&(a.headers={Authorization:n}),(0,_.default)(a)}Object.defineProperty(a,"__esModule",{value:!0}),a.LANGUAGE=a.GEOGRAPHY=a.INDICATOR=a.INDICATORS=a.PROJECT=a.PROJECTS=a.AUTHENTICATED=a.ACTION=void 0,a.hideModalAbout=r,a.updateAuth=s,a.updateProjects=i,a.updateProject=l,a.updateIndicators=o,a.updateIndicator=c,a.updateGeography=m,a.updateLang=u,a.getAuthStatus=d,a.getProjects=p,a.getProject=h,a.getIndicators=f,a.getIndicator=g,a.getGeography=y;var v=e("reqwest"),_=n(v),E=e("store"),j=n(E),A=e("topojson-client"),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(A),w=e("url"),k=n(w),x=e("../config"),T=e("../utils/auth"),P=n(T),C=e("../utils/map-utils"),S=a.ACTION="ACTION",M=a.AUTHENTICATED="AUTHENTICATED",O=a.PROJECTS="PROJECTS",I=a.PROJECT="PROJECT",D=a.INDICATORS="INDICATORS",R=a.INDICATOR="INDICATOR",L=a.GEOGRAPHY="GEOGRAPHY",F=a.LANGUAGE="LANGUAGE",z="assets/data/topojson/yem_boundary.json",H="assets/data/topojson/yem_districts.json"},{"../config":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config.js","../utils/auth":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/auth.js","../utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js",reqwest:"reqwest",store:"store","topojson-client":"topojson-client",url:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/url/url.js"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/auto-suggest.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),s=n(r),i=e("react-autosuggest"),l=n(i),o=s.default.createClass({displayName:"AutoSuggest",propTypes:{suggestions:s.default.PropTypes.array,getDisplayName:s.default.PropTypes.func,placeholder:s.default.PropTypes.string,onSelect:s.default.PropTypes.func},getInitialState:function(){return{value:"",active:[]}},getSuggestions:function(e){var t=e.value,a=t.trim().toLowerCase(),n=a.length;if(n<=1)return[];var r=this.props.getDisplayName;return this.props.suggestions.filter(function(e){return r(e).toLowerCase().slice(0,n)===a})},onSuggestionsFetch:function(e){this.setState({active:this.getSuggestions(e)})},onSuggestionsClear:function(){this.setState({active:[]})},onChange:function(e,t){this.setState({value:t.newValue})},renderSuggestion:function(e){return s.default.createElement("div",null,this.props.getDisplayName(e))},render:function(){var e=this.state,t=e.active,a=e.value,n=this.props.placeholder,r={placeholder:n,value:a,onChange:this.onChange};return s.default.createElement("div",null,s.default.createElement(l.default,{suggestions:t,onSuggestionsFetchRequested:this.onSuggestionsFetch,onSuggestionsClearRequested:this.onSuggestionsClear,getSuggestionValue:this.props.getDisplayName,renderSuggestion:this.renderSuggestion,inputProps:r,onSuggestionSelected:this.props.onSelect}))}});t.exports=o},{react:"react","react-autosuggest":"react-autosuggest"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/axis.js":[function(e,t,a){"use strict";var n=e("react"),r=function(e){return e&&e.__esModule?e:{default:e}}(n),s=e("react-router"),i=function(e){return e},l=r.default.createClass({displayName:"Axis",propTypes:{scale:r.default.PropTypes.func,labels:r.default.PropTypes.array,orientation:r.default.PropTypes.string,height:r.default.PropTypes.number,width:r.default.PropTypes.number,margin:r.default.PropTypes.object,format:r.default.PropTypes.func,links:r.default.PropTypes.array},render:function(){var e=this,t=this.props,a=t.scale,n=t.labels,l=t.orientation,o=t.height,c=t.width,m=t.margin,u=void 0,d=void 0,p=void 0,h=void 0;switch(l){case"left":u="translate("+m.left+","+m.top+")",d="0.5em",p=-5,h="end";break;case"right":u="translate("+(m.left+c)+","+m.top+")",d="0.5em",p=5,h="start";break;case"bottom":default:u="translate("+m.left+","+(o+m.top)+")",d="1em",p=0,h="middle"}var f=this.props.format||i,g=this.props.links&&Array.isArray(this.props.links)&&this.props.links.length,y="left"===l||"right"===l;return r.default.createElement("g",{className:"axis axis__"+l,transform:u},n.map(function(t,n){var i=void 0,l=void 0;y?(i=0,l=a(t)+("function"==typeof a.bandwidth?a.bandwidth()/1.5:0)):(i=a(t)+("function"==typeof a.bandwidth?a.bandwidth()/2:0),l=5);var o=r.default.createElement("text",{key:t+n,className:"chart__axis-ticks",x:i,y:l,dy:d,dx:p,textAnchor:h},f(t));return g?r.default.createElement(s.Link,{to:e.props.links[n],key:t},o):o}),r.default.createElement("line",{className:"chart__axis--line",x1:"0",y1:"0",x2:y?0:c,y2:y?o:0}))}});t.exports=l},{react:"react","react-router":"react-router"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/horizontal-bar.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),s=n(r),i=e("d3-scale"),l=e("lodash"),o=e("./axis"),c=n(o),m=e("../../utils/governorates"),u=e("../../utils/districts"),d=s.default.createClass({displayName:"HorizontalBarChart",propTypes:{data:s.default.PropTypes.array,margin:s.default.PropTypes.object,yTitle:s.default.PropTypes.string,xFormat:s.default.PropTypes.func,yFormat:s.default.PropTypes.func,activeProject:s.default.PropTypes.string,lang:s.default.PropTypes.string},getInitialState:function(){return{width:0,tooltipX:0,tooltipY:0,tooltipTitle:null,tooltipBody:null,tooltip:null}},onWindowResize:function(){var e=this.refs.chartContainer.getBoundingClientRect(),t=this.props.data,a=15*t.length+150;this.setState({width:e.width,height:a})},mouseover:function(e,t,a){this.setState({tooltip:!0,tooltipX:e,tooltipY:t,tooltipTitle:a.name,tooltipBody:this.props.xFormat?this.props.xFormat(a.value):a.value})},mouseout:function(){this.setState({tooltip:!1})},componentDidMount:function(){this.onWindowResize(),this.onWindowResize=(0,l.debounce)(this.onWindowResize,200),this.mouseover=(0,l.throttle)(this.mouseover,5),window.addEventListener("resize",this.onWindowResize)},componentWillUnmount:function(){window.removeEventListener("resize",this.onWindowResize)},render:function(){var e=this,t=this.state,a=t.width,n=t.height,r=this.props,o=r.lang,d=r.data,p=r.yTitle,h="ar"===o,f=Object.assign({},this.props.margin);h&&(f=Object.assign(f,{left:f.right,right:f.left}));var g=a-f.left-f.right;if(g<=0)return s.default.createElement("div",{className:"chart-container",ref:"chartContainer"});var y=15*d.length,b=h?"nameAr":"name";d.map(function(e,t){var a=e.name;a&&0===a.indexOf("YEM")&&(5===a.length?a=(0,m.byYem)(a)[b]:7===a.length&&(a=(0,u.byId)(a.substring(3))[b])),d[t].name=a});var v=d.map(function(e){return e.name}),_=d.map(function(e){return e.value}),E=d.map(function(e){return e.link}).filter(Boolean),j=(0,i.scaleBand)().paddingInner(.6).paddingOuter(.2),A=[0,g],N=(0,i.scaleLinear)().range([0,g]).domain([0,(0,l.max)(_)]),w=h?(0,i.scaleLinear)().range([g,0]).domain([0,(0,l.max)(_)]):N,k=N.ticks(3),x=j.rangeRound([y,-10]).domain(v),T=v,P=x.bandwidth();return s.default.createElement("div",{className:"chart-container",ref:"chartContainer"},s.default.createElement("svg",{className:"chart",width:a,height:15*d.length+80,ref:"svg"},s.default.createElement(c.default,{scale:w,labels:k,orientation:"bottom",height:y,width:g,margin:f,format:this.props.xFormat}),s.default.createElement(c.default,{scale:x,labels:T,orientation:h?"right":"left",height:y,width:g,margin:f,format:this.props.yFormat,links:E}),s.default.createElement("g",{transform:"translate("+f.left+", "+f.top+")"},d.map(function(t,a){var n=t.name===e.props.activeProject?" active":"",r=N(t.value),i=h?A[1]-r:0;return s.default.createElement("rect",{key:t.name+a,className:"chart__bar"+n,y:x(t.name)+P/3,x:i,height:P,width:N(t.value),onMouseMove:function(a){return e.mouseover(a.clientX,a.clientY,t)},onMouseOut:e.mouseout})})),s.default.createElement("text",{x:-n/2+24,y:4,dy:"1em",transform:"rotate(-90)",textAnchor:"middle",className:"chart__axis-title"},p)),s.default.createElement("div",{className:"tooltip",style:{position:"fixed",display:this.state.tooltip?"block":"none",left:this.state.tooltipX,top:this.state.tooltipY}},s.default.createElement("div",{className:"tooltip__inner"},s.default.createElement("h4",{className:"tooltip__title"},this.state.tooltipTitle),s.default.createElement("p",{className:"tooltip__body"},this.state.tooltipBody))))}});t.exports=d},{"../../utils/districts":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/districts.js","../../utils/governorates":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/governorates.js","./axis":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/axis.js","d3-scale":"d3-scale",lodash:"lodash",react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/pie.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),s=n(r),i=e("d3"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),o=e("lodash"),c=e("../../utils/slugify"),m=n(c),u=s.default.createClass({displayName:"PieChart",propTypes:{data:s.default.PropTypes.array},getInitialState:function(){return{width:0,height:0,tooltipX:0,tooltipY:0,tooltipTitle:null,tooltipBody:null,tooltip:null}},onWindowResize:function(){var e=this.refs.chartContainer.getBoundingClientRect();this.setState({width:e.width,height:e.height})},mouseover:function(e,t,a,n){this.setState({tooltip:!0,tooltipX:e,tooltipY:t,tooltipTitle:a,tooltipBody:n})},mouseout:function(){this.setState({tooltip:!1})},componentDidMount:function(){this.onWindowResize(),this.onWindowResize=(0,o.debounce)(this.onWindowResize,200),this.mouseover=(0,o.throttle)(this.mouseover,15),window.addEventListener("resize",this.onWindowResize)},componentWillUnmount:function(){window.removeEventListener("resize",this.onWindowResize)},render:function(){var e=this,t=this.state,a=t.width,n=t.height,r=this.props.data,i=Math.min(a,n)/2;if(i<=0)return s.default.createElement("div",{className:"chart-container",ref:"chartContainer"});var o=l.arc().outerRadius(i-10).innerRadius(100),c=l.pie().value(function(e){return e.value})(this.props.data),u=r.map(function(e){return e.name});return s.default.createElement("div",{className:"chart-container",ref:"chartContainer"},s.default.createElement("svg",{className:"chart",width:a,height:n,ref:"svg"},s.default.createElement("g",{className:"arc",transform:"translate("+a/2+", "+n/2+")"},c.map(function(t,a){return s.default.createElement("path",{key:a,d:o(t),className:"pie__slice__"+(0,m.default)(u[a]),onMouseMove:function(n){return e.mouseover(n.clientX,n.clientY,u[a],t.value)},onMouseOut:e.mouseout})}))),s.default.createElement("div",{className:"tooltip",style:{position:"fixed",display:this.state.tooltip?"block":"none",left:this.state.tooltipX,top:this.state.tooltipY}},s.default.createElement("div",{className:"tooltip__inner"},s.default.createElement("h4",{className:"tooltip__title"},this.state.tooltipTitle),s.default.createElement("p",{className:"tooltip__body"},this.state.tooltipBody))))}});t.exports=u},{"../../utils/slugify":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js",d3:"d3",lodash:"lodash",react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/csv-btn.js":[function(e,t,a){"use strict";var n=e("react"),r=function(e){return e&&e.__esModule?e:{default:e}}(n),s=e("object-path"),i=e("global"),l=e("../utils/serialize-csv"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(l),c=e("../utils/districts"),m=e("../utils/governorates"),u=r.default.createClass({displayName:"CSVBtn",propTypes:{lang:r.default.PropTypes.string,title:r.default.PropTypes.string,relatedProjects:r.default.PropTypes.array,projects:r.default.PropTypes.array,project:r.default.PropTypes.object,chartData:r.default.PropTypes.array,disbursement:r.default.PropTypes.array,summary:r.default.PropTypes.object,ministryActiveProjects:r.default.PropTypes.array,kmiData:r.default.PropTypes.array},serialize:function(){var e=this,t="data:text/csv;charset=utf-8,"+(this.props.title||"");if(this.props.project){var a=o.project(this.props.project,this.props.lang);t+="\n\nProject Data\n\n",t=t.concat(o.serialize(a));var n=this.props.project.location.map(function(t){var a=(0,m.byId)(t.district.governorate);a=a?"en"===e.props.lang?a.name:a.nameAr:"N/A";var n=(0,c.byId)(t.district.district);return n=n?"en"===e.props.lang?n.name:n.nameAr:"N/A",{governorate:a,district:n}});n=o.locations(n),t+="\n\nLocations\n\n",t=t.concat(o.serialize(n))}if(this.props.summary&&(t+="\n\n"+this.props.summary.title+"\n\n",t=t.concat(o.serialize(o.summary(this.props.summary.data)))),this.props.ministryActiveProjects){var r=o.ministryActiveProjects(this.props.ministryActiveProjects);t+="\n\nActive Project Status\n\n",t=t.concat(o.serialize(r))}if(this.props.chartData&&this.props.chartData.length&&this.props.chartData.forEach(function(e){t+="\n\n"+e.title+"\n\n",t+=o.serialize(o.chartData(e.data))}),this.props.disbursement&&this.props.disbursement.length){var l=o.disbursement(this.props.disbursement);t+="\n\nDisbursement vs. Reach\n\n",t=t.concat(o.serialize(l))}if(this.props.kmiData&&Array.isArray(this.props.kmiData)&&this.props.kmiData.length){var u=o.kmiData((0,s.get)(this.props,"kmiData",[]),this.props.lang);t+="\n\nMonitoring Indicators\n\n",t=t.concat(o.serialize(u))}if(this.props.relatedProjects&&this.props.relatedProjects.length){var d=o.relatedProjects((0,s.get)(this.props,"relatedProjects",[]),this.props.lang);t+="\n\nRelated Projects\n\n",t=t.concat(o.serialize(d))}if(this.props.projects&&this.props.projects.length){var p=o.relatedProjects((0,s.get)(this.props,"projects",[]),this.props.lang);t+="\n\nProjects\n\n",t=t.concat(o.serialize(p))}if(i.window.encodeURI&&"function"==typeof i.window.encodeURI){var h=document.createElement("a");document.body.appendChild(h),h.download="download.csv",h.href=i.window.encodeURI(t),h.target="_blank",h.click(),document.body.removeChild(h)}},render:function(){var e=(0,s.get)(i.window.t,[this.props.lang,"general_buttons","csv"]);return r.default.createElement("button",{className:"button button--medium button--primary button--download",onClick:this.serialize},e)}});t.exports=u},{"../utils/districts":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/districts.js","../utils/governorates":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/governorates.js","../utils/serialize-csv":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/serialize-csv.js",global:"global","object-path":"object-path",react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/map.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(0,m.default)(e);return[[t[1],t[0]],[t[3],t[2]]]}var s=e("react"),i=n(s),l=e("global/window"),o=n(l),c=e("@turf/bbox"),m=n(c),u=e("d3-scale"),d=e("lodash"),p=e("object-path"),h=e("../utils/districts"),f=e("../utils/governorates"),g=e("../utils/is-numerical-overlay"),y=e("../utils/format"),b=e("../utils/scales"),v=o.default.L,_=[[12.355429,53.360596],[19.1,41.231689]],E=["#E8F8FF","#CAE6F7","#A2D1E9","#6BAFD6","#4079B3","#1D599E","#083E7D","#0C2B53"],j=["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],A={weight:1,opacity:1,color:"white",fillOpacity:.8},N={"very low":1,low:2,medium:3,high:4,"very high":5},w={1:"very low",2:"low",3:"medium",4:"high",5:"very high"},k=i.default.createClass({displayName:"Map",propTypes:{lang:i.default.PropTypes.string,location:i.default.PropTypes.object,markers:i.default.PropTypes.array,overlay:i.default.PropTypes.object},getInitialState:function(){return{activeProject:!0,activeIndicator:!1,overlayScale:!1,overlayLayer:!1}},fitMap:function(e){var t=void 0;t=e.location?e.location.type?r(e.location):e.location:_,this.map.fitBounds(t)},addClusterMarkers:function(e,t){t=t||"en";var a="en"===t?"name":"nameAr",n=this.markerLayer;n.clearLayers(),e.forEach(function(e){var r=v.marker(e.centroid,{icon:v.mapbox.marker.icon({"marker-symbol":"circle","marker-color":"2B2342"})}),s="ontime"===e.ontime?"On Time":"delayed"===e.ontime?"Delayed":"Extended",i=e.ontime?"project--ontime":"project--delayed",l=e.isDistrict?h.byName:f.byName,o=l(e.region)[a],c="en"===t?e.name||"English name missing":e.name_ar||"Arabic name missing";r.bindPopup("<div class='marker__internal project--"+e.ontime+"'><h5 class='marker__title'><a href='#/"+t+"/projects/"+e.id+"' class='link--deco'>"+c+"</a></h5><dl class='card-meta "+i+"'><dt class='card-meta__label'>Status</dt><dd class='card-meta__value card-meta__value--status'>"+s+"</dd><dt class='card-meta__label'>Location</dt><dd class='card-meta__value card-meta__value--location'>"+o+"</dd></dl></div>"),n.addLayer(r)})},renderOverlay:function(e){if(this.overlay&&this.overlay.remove(),!e)return!1;var t=e.values,a=e.regions,n=e.category;n?"categorical"===n||(0,g.isNumerical)(t)||(n="categorical"):n=(0,g.isNumerical)(t)?"diverging":"categorical";var r=void 0,s=void 0;if(n)switch(n.toLowerCase()){case"sequential":r=t.filter(function(e){return!isNaN(e.value)}).map(function(e){return+e.value}),s=(0,u.scaleQuantile)().domain(r).range(E.slice(0,5));break;case"diverging":case"divergent":r=t.map(function(e){return+e.value}),s=(0,u.scaleQuantile)().domain(r).range(j.slice(0,5));break;case"categorical":default:r=(0,d.uniq)(t.map(function(e){return e.value})).sort(function(e,t){return e<t?1:-1});var i=j.length;r.length>i&&(console.log("WARNING: categorical data for this indicator contains too many unique categories"),console.log("Shortening the number of indicators to",i),r=r.slice(0,i)),s=(0,u.scaleOrdinal)().domain(r).range(j.slice(0,r.length))}var l=function(e){return e.properties._value?(0,d.extend)({fillColor:s(e.properties._value)},A):A},o=a.features.length>300,c=o?"id":"admin_id",m={};return t.forEach(function(e){o?m[e.id.substring(3,7)]="categorical"===n?e.value:+e.value:m[e.id]="categorical"===n?e.value:+e.value}),a.features.forEach(function(e){e.properties._value=(0,p.get)(m,e.properties[c])}),this.overlay=v.geoJson(a,{style:l}).bindPopup(function(e){var t=e.feature,a=t.properties[c];return"\n      <div class='marker__internal'>\n        <h5 class='marker__title'>"+(o?(0,p.get)((0,h.byId)(a),"name"):(0,p.get)((0,f.byYem)(a),"name"))+"</h5>\n        <p class='marker__description'>Value: <strong>"+(0,p.get)(t,"properties._value","--")+"</strong></p>\n      </div>\n      "}).addTo(this.overlayLayer),s},componentWillUnmount:function(){this.map.remove()},componentWillReceiveProps:function(e){if(!e.location||this.props.location&&JSON.stringify(e.location)===JSON.stringify(this.props.location)||this.fitMap(e),!e.markers||this.props.markers&&e.markers.length===this.props.markers.length&&JSON.stringify(e.markers)===JSON.stringify(this.props.markers)&&e.lang===this.props.lang||this.addClusterMarkers(e.markers,e.lang),e.overlay&&(!this.props.overlay||e.overlay.id!==this.props.overlay.id)||this.props.overlay&&!e.overlay)if(e.overlay&&e.overlay.hasOwnProperty("mapid")){var t=this.addMapboxLayer(e.overlay.mapid);this.renderOverlay(!1),this.setState({overlayLayer:t,overlayScale:b.customScales[e.overlay.mapid]})}else{this.props.overlay&&this.props.overlay.hasOwnProperty("mapid")&&(this.removeMapboxLayer(),this.setState({overlayLayer:!1}));var a=this.renderOverlay(e.overlay);this.setState({overlayScale:a})}},mountMap:function(e){if(e){this.map=v.mapbox.map(e,null,{scrollWheelZoom:!1,maxZoom:11});var t={Basic:v.tileLayer("https://api.mapbox.com/styles/v1/map-egypt/civld9uy0000n2kmnd7lqs3ne/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwLWVneXB0IiwiYSI6ImNpdmxkMjl6bTA3c2YyeXBvNDJnZDlqZGMifQ.KQSizb18ILr6wri0cBcd2Q"),Satellite:v.mapbox.tileLayer("mapbox.satellite")};t.Basic.addTo(this.map),v.control.layers(t).addTo(this.map),this.overlayLayer=v.featureGroup(),this.map.addLayer(this.overlayLayer),this.markerLayer=v.markerClusterGroup({polygonOptions:{opacity:0,fillOpacity:0}}),this.map.addLayer(this.markerLayer),this.fitMap(this.props);var a=this.props,n=a.markers,r=a.overlay,s=a.lang;if(n&&this.addClusterMarkers(n,s),r){var i=this.renderOverlay(r);this.setState({overlayScale:i})}}},addMapboxLayer:function(e){var t=v.mapbox.tileLayer(e);return this.map.addLayer(t),t},removeMapboxLayer:function(){this.map.removeLayer(this.state.overlayLayer)},renderMarkerLegend:function(e){var t=(0,p.get)(o.default.t,[this.props.lang,"map_labels"],{});return i.default.createElement("div",{className:"legend__markers"},i.default.createElement("div",{className:"legend__item"},i.default.createElement("span",{className:"legend--cluster"},e),i.default.createElement("span",{className:"legend__label--cluster"},t.map_group_label)),i.default.createElement("div",{className:"legend__item"},i.default.createElement("span",{className:"legend__label--marker"},t.map_project_label)))},renderOverlayLegend:function(e,t){var a=e.hasOwnProperty("invertExtent"),n=a?e.range():e.domain();n.sort(function(e,t){return t-e});var r=!1,s=(0,p.get)(this.props,"overlay.category");if(s&&"categorical"===s.toLowerCase()){var l=n.map(function(e){return N[e]});l.sort(function(e,t){return t-e}),r=l.filter(Boolean).length===n.length,n=r?l:n}var c=(0,p.get)(o.default.t,[this.props.lang,"map_labels"],{}),m=this.props.overlay.values.length<this.props.overlay.regions.features.length?i.default.createElement("dl",{key:"nodata-swatch",className:"legend__item legend__overlay--item"},i.default.createElement("dt",{className:"legend__item--overlay--bg",style:{backgroundColor:"#ffffff"}}),i.default.createElement("dt",{className:"legend__item--overlay-text"},c.no_data)):"";return i.default.createElement("span",{className:"legend__overlay"},m,n.map(function(t,n){var s=a?t:e(t),l=a?e.invertExtent(t).map(y.roundedNumber).join(" - "):t;return i.default.createElement("dl",{key:t,className:"legend__item legend__overlay--item"},i.default.createElement("dt",{className:"legend__item--overlay--bg",style:{backgroundColor:s}}),i.default.createElement("dt",{className:"legend__item--overlay-text"},r&&!a?w[l]:l))}),i.default.createElement("span",{className:"legend__overlay--units"},t&&"unknown"!==t.toLowerCase()?t+" (Units)":""))},render:function(){return i.default.createElement("div",{className:"map__group"},i.default.createElement("div",{className:"map__container",ref:this.mountMap}),i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"legend__container"},this.renderMarkerLegend(this.props.markers.length),this.state.overlayScale&&this.renderOverlayLegend(this.state.overlayScale,this.props.overlay.units))))}});t.exports=k},{"../utils/districts":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/districts.js","../utils/format":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/format.js","../utils/governorates":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/governorates.js","../utils/is-numerical-overlay":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/is-numerical-overlay.js","../utils/scales":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/scales.js","@turf/bbox":"@turf/bbox","d3-scale":"d3-scale","global/window":"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/global/window.js",lodash:"lodash","object-path":"object-path",react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/page-footer.js":[function(e,t,a){"use strict";var n=e("react"),r=function(e){return e&&e.__esModule?e:{default:e}}(n),s=e("object-path"),i=e("global"),l=r.default.createClass({displayName:"PageFooter",getInitialState:function(){return{email:""}},propTypes:{lang:r.default.PropTypes.string},onChange:function(e){this.setState({email:e.target.value})},render:function(){var e=(0,s.get)(i.window.t,[this.props.lang,"footer"],{});return r.default.createElement("footer",{className:"page__footer",role:"contentinfo"},r.default.createElement("div",{className:"inner"},r.default.createElement("div",{className:"contact"},r.default.createElement("p",{className:"contact__item"},r.default.createElement("a",{title:"contact us",href:"mailto:ifpri-egypt@cgiar.org, abdulwahedmukred@gmail.com",className:"link--primary"},r.default.createElement("span",null,e.contact_link))," ",e.contact_sentence,".")),r.default.createElement("div",null,r.default.createElement("div",{className:"logos"},r.default.createElement("ul",{className:"logos__list"},r.default.createElement("li",null,r.default.createElement("a",{title:"Visit sponsor webpage",className:"logos__item",target:"_blank",href:"http://www.ifpri.org/"},r.default.createElement("img",{src:"assets/graphics/content/iflri.png",alt:"View sponsor website"}))),r.default.createElement("li",null,r.default.createElement("a",{title:"Visit sponsor webpage",className:"logos__item",target:"_blank",href:"http://scalingupnutrition.org/sun-countries/yemen/"},r.default.createElement("img",{src:"assets/graphics/content/logo-scalingup.jpg",alt:"View sponsor website"}))),r.default.createElement("li",null,r.default.createElement("a",{title:"Visit sponsor webpage",className:"logos__item logo__item--fsts",target:"_blank",href:"http://www.fsts-gov.com/?language=english"},r.default.createElement("img",{src:"assets/graphics/content/fsts-logo.png",alt:"View sponsor website"}))),r.default.createElement("li",null,r.default.createElement("a",{title:"Visit sponsor webpage",className:"logos__item",target:"_blank",href:"https://www.giz.de/en/worldwide/369.html"},r.default.createElement("img",{src:"assets/graphics/content/giz-red-logo.jpg",alt:"View sponsor website"}))))))))}});t.exports=l},{global:"global","object-path":"object-path",react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/page-header.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){var n=e.slice();return n[t]=a,n}var s=e("react"),i=n(s),l=e("react-router"),o=e("../utils/auth"),c=n(o),m=e("store"),u=n(m),d=e("object-path"),p=e("../actions"),h=e("global"),f=i.default.createClass({displayName:"PageHeader",propTypes:{location:i.default.PropTypes.object,dispatch:i.default.PropTypes.func,authenticated:i.default.PropTypes.bool,lang:i.default.PropTypes.string},onRootMenuClick:function(e){document.documentElement.classList.remove("offcanvas-revealed")},offcanvasMenuClick:function(e){e.preventDefault(),document.documentElement.classList.toggle("offcanvas-revealed")},onLoginClick:function(){u.default.set("last_path_before_auth",this.props.location.pathname),c.default.login()},onLogoutClick:function(){c.default.logout(),this.props.dispatch((0,p.updateAuth)(!1))},render:function(){var e="/"+this.props.lang,t=(0,d.get)(h.window.t,[this.props.lang,"main_navigation"],{}),a=this.props.location.pathname.split("/"),n=a.indexOf(this.props.lang),s=n>=0?r(a,n,"ar").join("/"):"/ar",o=n>=0?r(a,n,"en").join("/"):"/en";return i.default.createElement("header",{className:"page__header",role:"banner"},i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"page__headline"},i.default.createElement("h1",{className:"page__title"},i.default.createElement("a",{href:"/",title:"Visit homepage"},i.default.createElement("img",{src:"/assets/graphics/layout/logo.svg",alt:"logotype",height:"53"})))),i.default.createElement("nav",{className:"page__prime-nav"},i.default.createElement("h2",{className:"page__prime-nav-title"},i.default.createElement("a",{href:"#nav-block-browse",onClick:this.offcanvasMenuClick},i.default.createElement("span",null,"Menu"))),i.default.createElement("div",{className:"nav-block",id:"nav-block-browse"},i.default.createElement("ul",{className:"browse-menu"},i.default.createElement("li",null,i.default.createElement(l.Link,{to:e+"/projects",title:"Visit projects and indicators page",className:"browse-menu__item link--deco",activeClassName:"link--deco-active",onClick:this.onRootMenuClick},i.default.createElement("span",null,t.projects_navitem))),i.default.createElement("li",null,i.default.createElement(l.Link,{to:e+"/about",title:"Visit about page",className:"browse-menu__item link--deco",activeClassName:"browse-menu__item link--deco-active",onClick:this.onRootMenuClick},i.default.createElement("span",null,t.about_navitem)))),i.default.createElement("ul",{className:"utilities-menu"},i.default.createElement("li",null,i.default.createElement(l.Link,{to:o,title:"Switch to English",className:"browse-menu__item link--deco",activeClassName:"link--deco-active",onClick:this.onRootMenuClick},i.default.createElement("span",null,"English"))),i.default.createElement("li",null,i.default.createElement(l.Link,{to:s,title:"Switch to Arabic",className:"browse-menu__item link--deco",activeClassName:"link--deco-active",onClick:this.onRootMenuClick},i.default.createElement("span",null,"عربي"))),!this.props.authenticated&&i.default.createElement("li",null,i.default.createElement(l.Link,{title:"Log in",className:"browse-menu__item link--deco",activeClassName:"browse-menu__item",onClick:this.onLoginClick},i.default.createElement("span",null,t.login_navitem))),this.props.authenticated&&i.default.createElement("li",null,i.default.createElement(l.Link,{to:this.props.location.pathname,title:"Log out",className:"browse-menu__item link--deco",activeClassName:"browse-menu__item",onClick:this.onLogoutClick},i.default.createElement("span",null,t.logout_navitem))))))))}});t.exports=f},{"../actions":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/actions/index.js",
"../utils/auth":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/auth.js",global:"global","object-path":"object-path",react:"react","react-router":"react-router",store:"store"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/print-btn.js":[function(e,t,a){"use strict";var n=e("react"),r=function(e){return e&&e.__esModule?e:{default:e}}(n),s=e("object-path"),i=e("global"),l=r.default.createClass({displayName:"Print",propTypes:{lang:r.default.PropTypes.string},print:function(){"function"==typeof i.window.print&&i.window.print()},render:function(){var e=(0,s.get)(i.window.t,[this.props.lang,"category_pages"],{});return r.default.createElement("button",{className:"button button--medium button--primary",onClick:this.print},e.print)}});t.exports=l},{global:"global","object-path":"object-path",react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return o.default.resolve(e,"category",(0,f.default)(t))}function s(e){if(e.status&&"closed"===e.status.en.toLowerCase())return"closed";var t=(0,p.parseProjectDate)(e.planned_end_date),a=(0,p.parseProjectDate)(e.actual_end_date),n=(0,p.parseProjectDate)(e.planned_start_date),r=(0,p.parseProjectDate)(e.actual_start_date),s=r>n||!r&&n&&n<(new Date).getTime(),i=!a&&t&&t<(new Date).getTime()||a>t;return n?n>(new Date).getTime()?"planned":s?"delayed":i?"extended":"ontime":null}function i(e){var t=e.actual_end_date||e.planned_end_date,a=e.actual_start_date;if(!t||!a)return 0;var n=(new Date).getTime(),r=(0,p.parseProjectDate)(t);if(n>r)return 100;var s=(0,p.parseProjectDate)(a),i=r-s,l=n-s;return Math.round(l/i*100)}var l=e("path"),o=n(l),c=e("react"),m=n(c),u=e("react-router"),d=e("object-path"),p=e("../utils/date"),h=e("../utils/slugify"),f=n(h),g=e("../utils/format"),y=e("../utils/location"),b=n(y),v=e("../utils/accessors"),_=m.default.createClass({displayName:"ProjectCard",propTypes:{lang:m.default.PropTypes.string,project:m.default.PropTypes.object},render:function(){var e=this.props,t=e.project,a=e.lang,n=s(t),l="project--"+n,c="/"+a,p=(0,d.get)(t,"budget",[]).reduce(function(e,t){return e+t.fund.amount},0),h=(0,g.pct)(i(t)),f=[];(0,d.get)(t,"location",[]).map(function(e,t){var n=(0,b.default)(e,a);n&&f.push(n.display)});var y=(0,d.get)(window.t,[a,"project_pages"],{});return m.default.createElement("div",{className:"project"},m.default.createElement("article",{className:l},m.default.createElement("div",{className:"card__contents"},m.default.createElement("header",{className:"card__header"},m.default.createElement("h1",{className:"card__title heading--xsmall"},m.default.createElement(u.Link,{to:o.default.resolve(c,"projects",t.id),className:"link--deco",href:""},(0,v.getProjectName)(t,a))),h&&m.default.createElement("ul",{className:"card-cmplt"},m.default.createElement("li",{style:{width:h}},m.default.createElement("span",null,h," cmplt")))),m.default.createElement("div",{className:"card__body"},m.default.createElement("dl",{className:"card-meta"},"closed"!==n&&"planned"!==n?m.default.createElement("dd",{className:"card-meta__value card-meta__value--timeline"},t.status[a]):"","planned"!==n?m.default.createElement("dd",{className:"card-meta__value card-meta__value--status "+l},y["status_"+n]):"",m.default.createElement("dd",{className:"card-meta__value card-meta__value--location"},f.join(", "))),m.default.createElement("p",null,(0,g.shortParagraph)((0,v.getDescription)(t,a))),m.default.createElement("div",{className:"card__categories"},t.categories.map(function(e,t){var n=e.en;return m.default.createElement("span",{key:n,className:"card__subtitle"},m.default.createElement(u.Link,{to:r(c,n),className:"link--secondary",href:""},e[a]))})),m.default.createElement("ul",{className:"card-stats"},m.default.createElement("li",null,(0,g.currency)((0,g.shortTally)(p))," ",m.default.createElement("small",null,y.funding_title.toLowerCase())),m.default.createElement("li",null,(0,g.tally)(t.number_served.number_served)," ",m.default.createElement("small",null,t.number_served["number_served_unit"+("ar"===a?"_ar":"")])))))))}});t.exports=_,t.exports.isOntime=s,t.exports.percentComplete=i},{"../utils/accessors":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/accessors.js","../utils/date":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/date.js","../utils/format":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/format.js","../utils/location":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/location.js","../utils/slugify":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js","object-path":"object-path",path:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/path-browserify/index.js",react:"react","react-router":"react-router"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-list.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),s=n(r),i=e("object-path"),l=e("lodash"),o=n(l),c=e("./project-card"),m=n(c),u=e("global"),d=s.default.createClass({displayName:"ProjectList",propTypes:{projects:s.default.PropTypes.array,meta:s.default.PropTypes.object,lang:s.default.PropTypes.string},getInitialState:function(){return{showSort:!1,sortAccessor:{name:"Alphabetical",class:"sort-alphabetical",func:function(e){return e.sort(function(e,t){return e.name<t.name?-1:1})}}}},toggleSort:function(){this.setState({showSort:!this.state.showSort})},setSortAccessor:function(e){this.setState({sortAccessor:{name:e.name,class:e.class,func:e.func},showSort:!1})},render:function(){var e=this,t=this.props.lang,a=this.props,n=a.projects,r=a.meta,l=this.state.sortAccessor,d=l.func(n.slice()),p={alphabetical:{name:"Alphabetical",class:"sort-alphabetical",func:function(e){return e.sort(function(e,t){return e.name<t.name?-1:1})}},completeUp:{name:"Percent Complete",class:"sort-ascending",func:function(e){return e.sort(function(e,t){return(0,c.percentComplete)(e)<(0,c.percentComplete)(t)?-1:1})}},completeDown:{name:"Percent Complete",class:"sort-descending",func:function(e){return e.sort(function(e,t){return(0,c.percentComplete)(e)>(0,c.percentComplete)(t)?-1:1})}}},h=(0,i.get)(u.window.t,[t,"projects_list_view"],{});return s.default.createElement("div",{className:"inpage__body"},s.default.createElement("div",{className:"inner"},s.default.createElement("section",{className:"inpage__section project-list"},s.default.createElement("div",{className:"section__header"},s.default.createElement("h1",{className:"section__title"},h.projects_title),s.default.createElement("div",{className:"sort"},s.default.createElement("label",{className:"heading--label"},h.sort_by_title,":"),s.default.createElement("span",{className:"dropdown__container"},s.default.createElement("button",{className:"button button--medium button--secondary drop__toggle--caret "+this.state.sortAccessor.class,onClick:this.toggleSort},h[this.state.sortAccessor.class.replace("-","_")]),this.state.showSort&&s.default.createElement("ul",{className:"drop__menu drop--align-left button--secondary"},o.default.map(p,function(t,a){return s.default.createElement("li",{className:"drop__menu-item menu-item--wide "+t.class,key:t.class,onClick:function(){return e.setSortAccessor(t)}},h[t.class.replace("-","_")])}))))),s.default.createElement("div",{className:"section__content"},s.default.createElement("ul",{className:"projects-list"},d.map(function(e){return s.default.createElement("li",{key:e.id,className:"projects-list__card"},s.default.createElement(m.default,{lang:r.lang,project:e}))}))))))}});t.exports=d},{"./project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js",global:"global",lodash:"lodash","object-path":"object-path",react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-timeline.js":[function(e,t,a){"use strict";function n(e,t,a,n){var r=a(new Date(e)),i=a(new Date(t)),l=i-r,c=s.default.createElement("div",{className:"timeline__row"},s.default.createElement("div",{className:"timeline__inner",style:{left:r+"%",width:l+"%"}}),s.default.createElement("hr",{style:{left:r+"%"}}),s.default.createElement("hr",{style:{left:i+"%"}}),s.default.createElement("h5",{className:"timeline__label",style:{left:r+"%"}},(0,o.formatDate)(e,n)),s.default.createElement("h5",{className:"timeline__label timeline__label--right",style:{right:100-i+"%"}},(0,o.formatDate)(t,n)));return"ar"===n&&(c=s.default.createElement("div",{className:"timeline__row"},s.default.createElement("div",{className:"timeline__inner",style:{left:100-i+"%",width:l+"%"}}),s.default.createElement("hr",{style:{right:i+"%"}}),s.default.createElement("hr",{style:{right:r+"%"}}),s.default.createElement("h5",{className:"timeline__label",style:{right:r+"%"}},(0,o.formatDate)(e,n)),s.default.createElement("h5",{className:"timeline__label timeline__label--right",style:{left:100-i+"%"}},(0,o.formatDate)(t,n)))),c}var r=e("react"),s=function(e){return e&&e.__esModule?e:{default:e}}(r),i=e("d3"),l=e("object-path"),o=e("../utils/date"),c=e("global"),m=s.default.createClass({displayName:"ProjectTimeline",propTypes:{project:s.default.PropTypes.object,meta:s.default.PropTypes.object,lang:s.default.PropTypes.string},render:function(){var e=this.props.project,t=(0,o.parseProjectDate)(e.planned_start_date),a=(0,o.parseProjectDate)(e.planned_end_date),r=e.actual_start_date?(0,o.parseProjectDate)(e.actual_start_date):null,m=!e.actual_end_date||(0,o.parseProjectDate)(e.actual_end_date)>(new Date).getTime()?(new Date).getTime():(0,o.parseProjectDate)(e.actual_end_date),u=r?Math.min(t,r):t,d=m?Math.max(a,m):a,p=(0,i.scaleTime)().domain([new Date(u),new Date(d)]).range([0,100]),h=this.props.lang,f=(0,l.get)(c.window.t,[h,"project_pages"],{});return s.default.createElement("div",{className:"timeline"},s.default.createElement("div",{className:"timeline__unit"},s.default.createElement("h5",{className:"timeline__headline heading-alt"},f.current_progress_title),r&&m&&n(r,m,p,h)),s.default.createElement("div",{className:"timeline__unit"},s.default.createElement("h5",{className:"timeline__headline heading-alt"},f.proposed_timeline_title),n(t,a,p,h)))}});t.exports=m},{"../utils/date":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/date.js",d3:"d3",global:"global","object-path":"object-path",react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/share.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=e("react"),s=n(r),i=e("url"),l=n(i),o=e("react-click-outside"),c=n(o),m=e("object-path"),u=e("../config"),d=e("clipboard"),p=n(d),h=e("global"),f=s.default.createClass({displayName:"ShareButton",propTypes:{path:s.default.PropTypes.string,meta:s.default.PropTypes.object,lang:s.default.PropTypes.string},getInitialState:function(){return{isOpen:!1}},show:function(){this.setState({isOpen:!0})},close:function(){this.setState({isOpen:!1})},handleClickOutside:function(){this.close()},componentDidMount:function(){this.clipboard=new p.default("#share-url-button")},componentWillUnmount:function(){this.clipboard&&"function"==typeof this.clipboard.destroy&&this.clipboard.destroy()},render:function(){var e=this.state.isOpen?" drop__content--open":"",t=this.props.lang,a=(0,m.get)(h.window.t,[t,"general_buttons"],{});return s.default.createElement("span",{className:"share--container"},s.default.createElement("button",{className:"button button--medium button--primary",onClick:this.show},a.share),this.state.isOpen&&s.default.createElement("div",{className:"share--box drop__content drop--align-right"+e},s.default.createElement("div",{className:"form__group"},s.default.createElement("label",{className:"form__label"},a.share_text),s.default.createElement("div",{className:"form__input-group"},s.default.createElement("input",{id:"share-url-field",readOnly:!0,type:"text",className:"form__control form__control--medium",value:l.default.resolve(u.baseUrl,"#"+this.props.path)}),s.default.createElement("span",{className:"form__input-group-button"},s.default.createElement("button",{type:"submit",className:"button button--primary button--text-hidden button--medium button--copy-icon","data-clipboard-target":"#share-url-field",id:"share-url-button"},s.default.createElement("span",null,"Button"))))),s.default.createElement("button",{className:"modal__button-dismiss",title:"close",onClick:this.close})))}});t.exports=(0,c.default)(f)},{"../config":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config.js",clipboard:"clipboard",global:"global","object-path":"object-path",react:"react","react-click-outside":"react-click-outside",url:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/url/url.js"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=e("lodash"),s=e("./config/base"),i=n(s),l=e("./config/develop"),o=(n(l),e("./config/production")),c=n(o),m=(0,r.clone)(i.default);(0,r.defaultsDeep)(m,c.default),t.exports=m},{"./config/base":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config/base.js","./config/develop":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config/develop.js","./config/production":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config/production.js",lodash:"lodash"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config/base.js":[function(e,t,a){"use strict";t.exports={api:"//ifpri-yemen-silo.herokuapp.com/",authDomain:"ifpri-yemen-silo.auth0.com",authClientId:"aAMY6pWnvscb5VCePYnH9w1Grv7c7QpH"}},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config/develop.js":[function(e,t,a){"use strict";t.exports={environment:"development",baseUrl:"http://localhost:3000/"}},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config/production.js":[function(e,t,a){"use strict";t.exports={environment:"production",baseUrl:"https://mapyemen.org/"}},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/main.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){(0,C.resumeAuth)("access_token="+e.params.access_token),s(e,t)}function s(e,t){var a=v.default.get("last_path_before_auth");a&&(v.default.clear("last_path_before_auth"),t({pathname:a})),i(e.location)}function i(e){var t=ae.getState().meta.lang,a=e.pathname.split("/").filter(Boolean)[0];t&&t===a||ae.dispatch((0,P.updateLang)(a))}var l=e("react"),o=n(l),c=e("react-dom"),m=e("redux"),u=e("react-redux"),d=e("redux-thunk"),p=n(d),h=e("redux-logger"),f=n(h),g=e("react-router-scroll"),y=e("react-router"),b=e("store"),v=n(b),_=e("mapbox.js"),E=(n(_),e("leaflet.markercluster")),j=(n(E),e("global/window")),A=n(j),N=e("./config"),w=n(N),k=e("./reducers"),x=n(k),T=e("./utils/map-utils"),P=e("./actions"),C=e("./utils/auth"),S=e("./views/app"),M=n(S),O=e("./views/home"),I=n(O),D=e("./views/uhoh"),R=n(D),L=e("./views/project-browse"),F=n(L),z=e("./views/project"),H=n(z),B=e("./views/category"),q=n(B),U=e("./views/donor"),Y=n(U),W=e("./views/owner"),G=n(W),V=e("./views/ministry"),J=n(V),K=e("./views/about"),Q=n(K),Z=e("./views/contact"),X=n(Z),$=e("./views/elements"),ee=n($);A.default.L.mapbox.accessToken="pk.eyJ1IjoibWFwLWVneXB0IiwiYSI6ImNpdmxkMjl6bTA3c2YyeXBvNDJnZDlqZGMifQ.KQSizb18ILr6wri0cBcd2Q";var te=(0,f.default)({level:"info",collapsed:!0,predicate:function(e,t){return"production"!==w.default.environment}}),ae=(0,m.createStore)(x.default,(0,m.applyMiddleware)(p.default,te)),ne=!(0,C.hasValidToken)();ae.dispatch((0,P.getAuthStatus)(function(){ne&&ae.dispatch((0,P.getProjects)())})),ae.dispatch((0,P.getProjects)()),ae.dispatch((0,P.getIndicators)()),ae.dispatch((0,P.getGeography)(T.GOVERNORATE)),ae.dispatch((0,P.getGeography)(T.DISTRICT));var re=(0,g.useScroll)(function(e,t){return e&&decodeURIComponent(t.location.pathname)!==decodeURIComponent(e.location.pathname)});(0,c.render)(o.default.createElement(u.Provider,{store:ae},o.default.createElement(y.Router,{history:y.hashHistory,render:(0,y.applyRouterMiddleware)(re)},o.default.createElement(y.Route,{path:"/404",component:R.default}),o.default.createElement(y.Route,{path:"/access_token=:access_token",onEnter:r}),o.default.createElement(y.Route,{path:"/:lang",component:M.default,onEnter:s},o.default.createElement(y.Route,{path:"projects",component:F.default}),o.default.createElement(y.Route,{path:"projects_sdg",component:F.default,modal:"SDG"}),o.default.createElement(y.Route,{path:"projects_other",component:F.default,modal:"other"}),o.default.createElement(y.Route,{path:"projects/:id",component:H.default}),o.default.createElement(y.Route,{path:"category/:name",component:q.default}),o.default.createElement(y.Route,{path:"donor/:name",component:Y.default}),o.default.createElement(y.Route,{path:"owner/:name",component:G.default}),o.default.createElement(y.Route,{path:"ministry/:name",component:J.default}),o.default.createElement(y.Route,{path:"about",component:Q.default}),o.default.createElement(y.Route,{path:"contact",component:X.default}),o.default.createElement(y.Route,{path:"elements",component:ee.default}),o.default.createElement(y.IndexRoute,{component:I.default,pageClass:"page--homepage"})),o.default.createElement(y.Redirect,{from:"/",to:"/en"}))),document.querySelector("#app-container"))},{"./actions":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/actions/index.js","./config":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config.js","./reducers":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/reducers/index.js","./utils/auth":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/auth.js","./utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js","./views/about":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/about.js","./views/app":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/app.js","./views/category":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/category.js","./views/contact":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/contact.js","./views/donor":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/donor.js","./views/elements":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/elements.js","./views/home":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/home.js","./views/ministry":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/ministry.js","./views/owner":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/owner.js","./views/project":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/project.js","./views/project-browse":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/project-browse.js","./views/uhoh":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/uhoh.js","global/window":"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/global/window.js","leaflet.markercluster":"leaflet.markercluster","mapbox.js":"mapbox.js",react:"react","react-dom":"react-dom","react-redux":"react-redux","react-router":"react-router","react-router-scroll":"react-router-scroll",redux:"redux","redux-logger":"redux-logger","redux-thunk":"redux-thunk",store:"store"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/reducers/api.js":[function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(e=Object.assign({},e),t.type){case s.AUTHENTICATED:(0,r.set)(e,"authenticated",t.data);break;case s.PROJECTS:(0,r.set)(e,"projects",t.data);break;case s.PROJECT:(0,r.set)(e,["projectDetail",t.data.id],t.data);break;case s.INDICATORS:(0,r.set)(e,"indicators",t.data);break;case s.INDICATOR:(0,r.set)(e,["indicatorDetail",t.data.id],t.data);break;case s.GEOGRAPHY:t.data.name===i.DISTRICT&&(0,r.get)(t.data.features,"features",[]).forEach(function(e){var t=e.properties.id;e.properties.admin_id="YEM"+t}),(0,r.set)(e,["geography",t.data.name],t.data.features)}return e}Object.defineProperty(a,"__esModule",{value:!0}),a.initialState=void 0,a.default=n;var r=e("object-path"),s=e("../actions"),i=e("../utils/map-utils"),l=a.initialState={authenticated:!1,projects:[],projectDetail:{},indicators:[],geography:{}}},{"../actions":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/actions/index.js","../utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js","object-path":"object-path"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/reducers/index.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a.reducers=void 0;var r=e("redux"),s=e("./api"),i=n(s),l=e("./meta"),o=n(l),c=a.reducers={def:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1];return e},api:i.default,meta:o.default};a.default=(0,r.combineReducers)(Object.assign({},c,{}))},{"./api":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/reducers/api.js","./meta":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/reducers/meta.js",redux:"redux"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/reducers/meta.js":[function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];return t.type===r.LANGUAGE?Object.assign({},e,{lang:t.data}):e}Object.defineProperty(a,"__esModule",{value:!0}),a.initialState=void 0,a.default=n;var r=e("../actions"),s=a.initialState={lang:null}},{"../actions":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/actions/index.js"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/accessors.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.getDonorName=function(e,t){return"ar"===t&&e.donor_name_ar?e.donor_name_ar:e.donor_name},a.getProjectName=function(e,t){return"ar"===t&&e.name_ar?e.name_ar:e.name},a.getDescription=function(e,t){return"ar"===t&&e.description_ar?e.description_ar:e.description}},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/auth.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(0,u.default)(e);if(!t.exp)return null;var a=new Date(0);return a.setUTCSeconds(t.exp),a}function s(e){var t=r(e);return null!==t&&!(t.valueOf()>(new Date).valueOf()+36e5)}var i=e("auth0-lock"),l=n(i),o=e("store"),c=n(o),m=e("jwt-decode"),u=n(m),d=e("../config"),p=void 0;p=new l.default(d.authClientId,d.authDomain,{theme:{primaryColor:"#55CBC9",logo:"assets/graphics/layout/logo.svg"},configurationBaseUrl:"https://cdn.auth0.com",autoParseHash:!1});var h=c.default.get("id_token"),f=h&&s(h),g=!!h&&!f;h&&f&&c.default.remove("id_token");var y=[];p.on("authenticated",function(e){setTimeout(function(){c.default.set("id_token",e.idToken),g=!0,y.forEach(function(e){return e(g)})},0),p.getProfile(e.accessToken,function(e,t){if(e)throw new Error(e);c.default.set("profile",JSON.stringify(t))})}),t.exports={login:function(){return p.show()},logout:function(){c.default.remove("id_token"),c.default.remove("profile")},registerDispatch:function(e){g?e(g):y.push(e)},hasValidToken:function(){var e=c.default.get("id_token");return!!e&&!s(e)},resumeAuth:function(e){p.resumeAuth(e,function(){})}}},{"../config":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config.js","auth0-lock":"auth0-lock","jwt-decode":"jwt-decode",store:"store"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/date.js":[function(e,t,a){"use strict";t.exports.parseProjectDate=function(e){if(!e)return!1;var t=e.split("/");return 2!==t.length?(console.log("Date",e,"does not match YEAR/MONTH format"),!1):new Date(t[0],t[1]-1).getTime()},t.exports.formatDate=function(e,t){if(!e)return!1;var a=new Date(e);return"ar"===t?a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate():a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()},t.exports.formatSimpleDate=function(e){if(!e)return!1;var t=new Date(e);return t.getMonth()+1+"/"+t.getFullYear()}},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/districts.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=a.districts=[{id:"1901",name:"Rumah",nameAr:"رماه"},{id:"2802",name:"Hat",nameAr:"حات"},{id:"1902",name:"Thamud",nameAr:"ثمود"},{id:"1903",name:"Al Qaf",nameAr:"القف"},{id:"2801",name:"Shahan",nameAr:"شحن"},{id:"1904",name:"Zamakh wa Manwakh",nameAr:"زموخ ومنوخ"},{id:"2201",name:"Baqim",nameAr:"باقم"},{id:"2805",name:"Man'ar",nameAr:"منعر"},{id:"2202",name:"Qatabir",nameAr:"قطابر"},{id:"2203",name:"Monabbih",nameAr:"منبه"},{id:"2210",name:"Majz",nameAr:"مجز"},{id:"2211",name:"Sahar",nameAr:"سحار"},{id:"2204",name:"Ghamr",nameAr:"غمر"},{id:"1610",name:"Bart Al Anan",nameAr:"برط العنان"},{id:"2205",name:"Razih",nameAr:"رازح"},{id:"2803",name:"Hawf",nameAr:"حوف"},{id:"2209",name:"Saqayn",nameAr:"ساقين"},{id:"2206",name:"Shada'a",nameAr:"شداء"},{id:"2208",name:"Haydan",nameAr:"حيدان"},{id:"1611",name:"Rajuzah",nameAr:"رجوزه"},{id:"1612",name:"Kharab Al Marashi",nameAr:"خراب المراشى"},{id:"1912",name:"As Sawm",nameAr:"السوم"},{id:"1702",name:"Harad",nameAr:"حرض"},{id:"1905",name:"Hagr As Sai'ar",nameAr:"حجر الصيعر"},{id:"1602",name:"Al Humaydat",nameAr:"الحميدات"},{id:"2903",name:"Al Ashah",nameAr:"العشـــــه"},{id:"1731",name:"Qarah",nameAr:"قارة"},{id:"1911",name:"Tarim",nameAr:"تريم"},{id:"1730",name:"Washhah",nameAr:"وشحة"},{id:"2904",name:"Al Qaflah",nameAr:"القفلة"},{id:"1604",name:"Az Zahir",nameAr:"الزاهر"},{id:"1606",name:"Al Maton",nameAr:"المتون"},{id:"1706",name:"Mustaba",nameAr:"مستباء"},{id:"2902",name:"Huth",nameAr:"حوث"},{id:"1603",name:"Al Matammah",nameAr:"المطمه"},{id:"2906",name:"Al Madan",nameAr:"المــدان"},{id:"1705",name:"Hayran",nameAr:"حيران"},{id:"1605",name:"Al Hazm",nameAr:"الحزم"},{id:"2905",name:"Shaharah",nameAr:"شهاره"},{id:"1707",name:"Kushar",nameAr:"كشر"},{id:"2806",name:"Al Masilah",nameAr:"المسيلة"},{id:"1910",name:"Sayun",nameAr:"سيئون"},{id:"1907",name:"Al Qatn",nameAr:"القطن"},{id:"1704",name:"Abs",nameAr:"عبس"},{id:"1906",name:"Al Abr",nameAr:"العبر"},{id:"1908",name:"Shibam",nameAr:"شبام"},{id:"1711",name:"Khayran Al Muharraq",nameAr:"خيران المحرق"},{id:"2920",name:"Bani Suraim",nameAr:"بني صريم"},{id:"1712",name:"Aslem",nameAr:"اسلم"},{id:"2907",name:"Suwayr",nameAr:"صـويــــر"},{id:"1607",name:"Al Maslub",nameAr:"المصلوب"},{id:"2613",name:"Marib",nameAr:"مأرب"},{id:"2808",name:"Qishn",nameAr:"قشن"},{id:"2909",name:"Dhi Bin",nameAr:"ذيبين"},{id:"1608",name:"Al Ghayl",nameAr:"الغيل"},{id:"2908",name:"Habur Zulaymah",nameAr:"حبور ظليمة"},{id:"2919",name:"Khamir",nameAr:"خمر"},{id:"1609",name:"Al Khalq",nameAr:"الخلق"},{id:"2809",name:"Huswain",nameAr:"حصوين"},{id:"1303",name:"Az'zal",nameAr:"أزال"},{id:"1708",name:"Al Jamimah",nameAr:"الجميمة"},{id:"1709",name:"Kuhlan Ash Sharaf",nameAr:"كحلان الشرف"},{id:"2913",name:"As Sudah",nameAr:"السوده"},{id:"2302",name:"Arhab",nameAr:"ارحب"},{id:"1714",name:"Aflah Al Yaman",nameAr:"افلح اليمن"},{id:"2303",name:"Nihm",nameAr:"نهم"},{id:"2601",name:"Majzar",nameAr:"مجزر"},{id:"1716",name:"Al Miftah",nameAr:"المفتاح"},{id:"2807",name:"Sayhut",nameAr:"سيحوت"},{id:"2910",name:"Kharif",nameAr:"خارف"},{id:"1713",name:"Qafl Shamer",nameAr:"قفل شمر"},{id:"2912",name:"Jabal Iyal Yazid",nameAr:"جبل عيال يزيد"},{id:"2602",name:"Raghwan",nameAr:"رغوان"},{id:"1721",name:"Ash Shahil",nameAr:"الشاهل"},{id:"2914",name:"As Sawd",nameAr:"السود"},{id:"1801",name:"Az Zuhrah",nameAr:"الزهرة"},{id:"1909",name:"Sah",nameAr:"ساه"},{id:"1720",name:"Mabyan",nameAr:"مبين"},{id:"1916",name:"Ghayl Bin Yamin",nameAr:"غيل بن يمين"},{id:"1718",name:"Kuhlan Affar",nameAr:"كحلان عفار"},{id:"1919",name:"Wadi Al Ayn",nameAr:"وادي العين وحوره"},{id:"1719",name:"Sharas",nameAr:"شرس"},{id:"1724",name:"Bani Qa'is",nameAr:"بني قيس"},{id:"1723",name:"Wadhrah",nameAr:"وضرة"},{id:"2603",name:"Medghal",nameAr:"مدغل"},{id:"2101",name:"Dhar",nameAr:"دهر"},{id:"2104",name:"Arma",nameAr:"عرماء"},{id:"1920",name:"Rakhyah",nameAr:"رخيه"},{id:"1728",name:"Hajjah City",nameAr:"مدينة حجة"},{id:"1928",name:"Huraidhah",nameAr:"حريضه"},{id:"1726",name:"Najrah",nameAr:"نجرة"},{id:"1725",name:"Ash Shaghadirah",nameAr:"الشغادرة"},{id:"1310",name:"Bani Al Harith",nameAr:"بني الحارث"},{id:"2916",name:"Maswar",nameAr:"مسور"},{id:"2103",name:"Jardan",nameAr:"جردان"},{id:"2301",name:"Hamdan",nameAr:"همدان"},{id:"2606",name:"Sirwah",nameAr:"صرواح"},{id:"1307",name:"At Tahrir",nameAr:"التحرير"},{id:"2702",name:"At Tawilah",nameAr:"الطويلة"},{id:"1921",name:"Amd",nameAr:"عمد"},{id:"2701",name:"Shibam Kawkaban",nameAr:"شبام كوكبان"},{id:"1805",name:"Al Munirah",nameAr:"المنيرة"},{id:"2709",name:"Al Mahwait",nameAr:"المحويت"},{id:"2304",name:"Bani Hushaysh",nameAr:"بني حشيش"},{id:"2102",name:"Al Talh",nameAr:"الطلح"},{id:"1301",name:"Old City",nameAr:"صنعاء القديمة"},{id:"2704",name:"Al Khabt",nameAr:"الخبت"},{id:"2703",name:"Ar Rujum",nameAr:"الرجم"},{id:"2604",name:"Harib Al Qaramish",nameAr:"حريب القرامش"},{id:"1913",name:"Ar Raydah Wa Qusayar",nameAr:"الريده وقصيعر"},{id:"2708",name:"Al Mahwait City",nameAr:"مدينة المحويت"},{id:"2706",name:"Hufash",nameAr:"حفاش"},{id:"2612",name:"Marib City",nameAr:"مدينة مأرب"},{id:"2605",name:"Bidbadah",nameAr:"بدبده"},{id:"2305",name:"Sanhan",nameAr:"سنحان وبني بهلول"},{id:"1808",name:"Al Mighlaf",nameAr:"المغلاف"},{id:"1304",name:"Assafi'yah",nameAr:"الصافية"},{id:"1807",name:"Az Zaydiyah",nameAr:"الزيدية"},{id:"1918",name:"Daw'an",nameAr:"دوعن"},{id:"1914",name:"Ad Dis",nameAr:"الديس"},{id:"1306",name:"Al Wahdah",nameAr:"الوحدة"},{id:"2707",name:"Bani Sa'd",nameAr:"بني سعد"},{id:"1309",name:"Ath'thaorah",nameAr:"الثورة"},{id:"2312",name:"Khwlan",nameAr:"خولان"},{id:"1302",name:"Shu'aub",nameAr:"شعوب"},{id:"1308",name:"Ma'ain",nameAr:"معين"},{id:"2314",name:"Bani Dhabyan",nameAr:"بني ضبيان"},{id:"1305",name:"As Sabain",nameAr:"السبعين"},{id:"2316",name:"Jihanah",nameAr:"جحانة"},{id:"1915",name:"Ash Shihr",nameAr:"الشحر"},{id:"2607",name:"Al Jubah",nameAr:"الجوبة"},{id:"1922",name:"Adh Dhlia'ah",nameAr:"الضليعه"},{id:"2109",name:"Merkhah As Sufla",nameAr:"مرخه السفلى"},{id:"2310",name:"Manakhah",nameAr:"مناخه"},{id:"1811",name:"Al Hajjaylah",nameAr:"الحجيلة"},{id:"2110",name:"Nisab",nameAr:"نصاب"},{id:"2306",name:"Bilad Ar Rus",nameAr:"بلاد الروس"},{id:"2309",name:"Al Haymah Al Kharijiyah",nameAr:"الحيمة الخارجية"},{id:"2311",name:"Sa'fan",nameAr:"صعفان"},{id:"2609",name:"Harib",nameAr:"حريب"},{id:"1917",name:"Ghayl Ba Wazir",nameAr:"غيل باوزير"},{id:"2608",name:"Rahabah",nameAr:"رحبه"},{id:"2614",name:"Jabal Murad",nameAr:"جبل مراد"},{id:"2315",name:"Al Husn",nameAr:"الحصن"},{id:"1823",name:"Al Hali",nameAr:"الحالي"},{id:"2001",name:"Al Hada",nameAr:"الحداء"},{id:"3101",name:"Bilad At Ta'am",nameAr:"بلاد الطعام"},{id:"2011",name:"Dawran Aness",nameAr:"ضوران اًنس"},{id:"1930",name:"Al Mukalla",nameAr:"المكلا"},{id:"1813",name:"Al Marawi'ah",nameAr:"المراوعة"},{id:"1923",name:"Yabuth",nameAr:"يبعث"},{id:"2107",name:"Bayhan",nameAr:"بيحان"},{id:"2002",name:"Jahran",nameAr:"جهران"},{id:"1822",name:"Al Mina",nameAr:"الميناء"},{id:"2003",name:"Jabal Ash sharq",nameAr:"جبل الشرق"},{id:"2610",
name:"Mahliyah",nameAr:"ماهليه"},{id:"2611",name:"Al Abdiyah",nameAr:"العبدية"},{id:"1815",name:"As Sukhnah",nameAr:"السخنة"},{id:"2115",name:"Ar Rawdah",nameAr:"الروضه"},{id:"1821",name:"Al Hawak",nameAr:"الحوك"},{id:"1414",name:"Al Quraishyah",nameAr:"القريشية"},{id:"1816",name:"Al Mansuriyah",nameAr:"المنصورية"},{id:"3102",name:"Al Jabin",nameAr:"الجبين"},{id:"1924",name:"Hajr",nameAr:"حجر"},{id:"2113",name:"Ataq",nameAr:"عتق"},{id:"2012",name:"Al Manar",nameAr:"المنار"},{id:"1929",name:"Al Mukalla City",nameAr:"مدينة المكلا"},{id:"2008",name:"Dhamar City",nameAr:"مدينة ذمار"},{id:"1925",name:"Brom Mayfa",nameAr:"بروم ميفع"},{id:"3106",name:"Mazhar",nameAr:"مزهر"},{id:"1420",name:"Al Malagim",nameAr:"الملاجم"},{id:"3105",name:"Al Jafariyah",nameAr:"الجعفرية"},{id:"2009",name:"Mayfa'at Anss",nameAr:"ميفعة عنس"},{id:"1817",name:"Bayt Al Faqiah",nameAr:"بيت الفقيه"},{id:"1413",name:"Rada'",nameAr:"رداع"},{id:"3104",name:"Kusmah",nameAr:"كسمه"},{id:"2108",name:"Merkhah Al Ulya",nameAr:"مرخه العليا"},{id:"2116",name:"Mayfa'a",nameAr:"ميفعه"},{id:"2005",name:"Utmah",nameAr:"عتمة"},{id:"2010",name:"Anss",nameAr:"عنس"},{id:"1403",name:"Maswarah",nameAr:"مسورة"},{id:"2004",name:"Maghirib Ans",nameAr:"مغرب عنس"},{id:"1419",name:"Ash Sharyah",nameAr:"الشرية"},{id:"2114",name:"Habban",nameAr:"حبان"},{id:"1416",name:"Al A'rsh",nameAr:"العرش"},{id:"1102",name:"Yarim",nameAr:"يريم"},{id:"2007",name:"Wusab As Safil",nameAr:"وصاب السافل"},{id:"1407",name:"At Taffah",nameAr:"الطفة"},{id:"2112",name:"As Said",nameAr:"الصعيد"},{id:"1417",name:"Sabah",nameAr:"صباح"},{id:"1404",name:"As Sawma'ah",nameAr:"الصومعة"},{id:"1203",name:"Jayshan",nameAr:"جيشان"},{id:"1408",name:"Mukayras",nameAr:"مكيراس"},{id:"1825",name:"Al Garrahi",nameAr:"الجراحي"},{id:"2111",name:"Hatib",nameAr:"حطيب"},{id:"1103",name:"Ar Radmah",nameAr:"الرضمة"},{id:"1106",name:"As Saddah",nameAr:"السدة"},{id:"1107",name:"Al Makhadir",nameAr:"المخادر"},{id:"1109",name:"Hazm Al Udayn",nameAr:"حزم العدين"},{id:"1207",name:"Sarar",nameAr:"سرار"},{id:"3001",name:"Juban",nameAr:"جبن"},{id:"1410",name:"Al Bayda",nameAr:"البيضاء"},{id:"1201",name:"Al Mahfad",nameAr:"المحفد"},{id:"1406",name:"Dhi Na'im",nameAr:"ذي ناعم"},{id:"1204",name:"Lawdar",nameAr:"لودر"},{id:"1818",name:"Jabal Ra's",nameAr:"جبل راس"},{id:"1111",name:"Al Udayn",nameAr:"العدين"},{id:"1120",name:"Ibb",nameAr:"إب"},{id:"3004",name:"Ash Shu'ayb",nameAr:"الشعيب"},{id:"2501",name:"Al Had",nameAr:"الحد"},{id:"1105",name:"Ash Sha'ir",nameAr:"الشعر"},{id:"1202",name:"Mudiyah",nameAr:"موديه"},{id:"1405",name:"Az Zahir",nameAr:"الزاهر"},{id:"1110",name:"Far Al Udayn",nameAr:"فرع العدين"},{id:"1819",name:"Hays",nameAr:"حيس"},{id:"1119",name:"Al Dhihar",nameAr:"الظهار"},{id:"1409",name:"Al Bayda City",nameAr:"مدينة البيضاء"},{id:"1118",name:"Al Mashannah",nameAr:"المشنة"},{id:"1205",name:"Sibah",nameAr:"سباح"},{id:"1115",name:"As Sayyani",nameAr:"السياني"},{id:"1114",name:"As Sabrah",nameAr:"السبرة"},{id:"1209",name:"Ahwar",nameAr:"احوار"},{id:"1112",name:"Jiblah",nameAr:"جبلة"},{id:"1116",name:"Dhi As Sufal",nameAr:"ذي السفال"},{id:"1505",name:"Maqbanah",nameAr:"مقبنة"},{id:"1210",name:"Zingibar",nameAr:"زنجبار"},{id:"2506",name:"Halimayn",nameAr:"حالمين"},{id:"1503",name:"Shara'b As Salam",nameAr:"شرعب السلام"},{id:"1504",name:"Shara'b Ar Rawnah",nameAr:"شرعب الرونة"},{id:"3009",name:"Al Husha",nameAr:"الحشاء"},{id:"3005",name:"Al Hussein",nameAr:"الحصين"},{id:"3006",name:"Ad Dhale'e",nameAr:"الضالع"},{id:"1208",name:"Al Wade'a",nameAr:"الوضيع"},{id:"2503",name:"Al Maflahy",nameAr:"المفلحي"},{id:"1516",name:"Al Wazi'iyah",nameAr:"الوازعية"},{id:"2504",name:"Yahr",nameAr:"يهر"},{id:"1206",name:"Rasad",nameAr:"رصد"},{id:"1502",name:"At Ta'iziyah",nameAr:"التعزية"},{id:"3007",name:"Jahaf",nameAr:"جحاف"},{id:"3008",name:"Al Azariq",nameAr:"الازارق"},{id:"1211",name:"Khanfir",nameAr:"خنفر"},{id:"2514",name:"Al  Hawtah",nameAr:"الحوطة"},{id:"2505",name:"Habil Jabr",nameAr:"حبيل جبر"},{id:"1519",name:"Al Qahirah",nameAr:"القاهرة"},{id:"1520",name:"Salh",nameAr:"صالة"},{id:"2507",name:"Radfan",nameAr:"ردفان"},{id:"1518",name:"Al Mudhaffar",nameAr:"المظفر"},{id:"1508",name:"Mawza",nameAr:"موزع"},{id:"1509",name:"Jabal Habashy",nameAr:"جبل حبشي"},{id:"2508",name:"Al Milah",nameAr:"الملاح"},{id:"1510",name:"Mashra'a Wa Hadnan",nameAr:"مشرعة وحدنان"},{id:"2408",name:"Khur Maksar",nameAr:"خور مكسر"},{id:"2401",name:"Dar Sad",nameAr:"دار سعد"},{id:"1513",name:"Dimnat Khadir",nameAr:"دمنة خدير"},{id:"2406",name:"Al Mualla",nameAr:"المعلا"},{id:"2510",name:"Al Qabbaytah",nameAr:"القبيطه"},{id:"1521",name:"Al Ma'afer",nameAr:"المعافر"},{id:"1523",name:"Sama",nameAr:"سامع"},{id:"1514",name:"As Silw",nameAr:"الصلو"},{id:"1517",name:"Hayfan",nameAr:"حيفان"},{id:"2402",name:"Ash Shaikh Outhman",nameAr:"الشيخ عثمان"},{id:"1522",name:"Al Mawasit",nameAr:"المواسط"},{id:"2515",name:"Tuban",nameAr:"تبن"},{id:"1515",name:"Ash Shamayatayn",nameAr:"الشمايتين"},{id:"1507",name:"Dhubab",nameAr:"ذباب"},{id:"1715",name:"Al Mahabishah",nameAr:"المحابشة"},{id:"2512",name:"Al Maqatirah",nameAr:"المقاطرة"},{id:"2511",name:"Tur Al Bahah",nameAr:"طور الباحة"},{id:"2404",name:"Al Buraiqeh",nameAr:"البريقه"},{id:"2403",name:"Al Mansura",nameAr:"المنصورة"},{id:"1926",name:"Hidaybu",nameAr:"حديبو"},{id:"2407",name:"Craiter",nameAr:"كريتر"},{id:"2405",name:"Attawahi",nameAr:"التواهي"},{id:"1113",name:"Ba'dan",nameAr:"بعدان"},{id:"1826",name:"At Tuhayat",nameAr:"التحيتا"},{id:"1108",name:"Hubaysh",nameAr:"حبيش"},{id:"1117",name:"Mudhaykhirah",nameAr:"مذيخرة"},{id:"1401",name:"Na'man",nameAr:"نعمان"},{id:"1820",name:"Al Khawkhah",nameAr:"الخوخه"},{id:"1824",name:"Zabid",nameAr:"زبيد"},{id:"2911",name:"Raydah",nameAr:"ريده"},{id:"2502",name:"Yafa'a",nameAr:"يافع"},{id:"1814",name:"Ad Durayhimi",nameAr:"الدريهمي"},{id:"1804",name:"As Salif",nameAr:"الصليف"},{id:"2918",name:"Iyal Surayh",nameAr:"عيال سريح"},{id:"1806",name:"Al Qanawis",nameAr:"القناوص"},{id:"1501",name:"Mawiyah",nameAr:"ماوية"},{id:"1802",name:"Alluheyah",nameAr:"اللحية"},{id:"1803",name:"Kamaran",nameAr:"كمران"},{id:"1511",name:"Sabir Al Mawadim",nameAr:"صبر الموادم"},{id:"1512",name:"Al Misrakh",nameAr:"المسراخ"},{id:"1412",name:"Radman Al Awad",nameAr:"ردمان"},{id:"1729",name:"Hajjah",nameAr:"حجة"},{id:"1927",name:"Qulensya Wa Abd Al Kuri",nameAr:"قلنسيه وعبدالكوري"},{id:"2215",name:"Sa'adah",nameAr:"صعدة"},{id:"1703",name:"Midi",nameAr:"ميدي"},{id:"2313",name:"Attyal",nameAr:"الطيال"},{id:"2212",name:"As Safra",nameAr:"الصفراء"},{id:"2705",name:"Milhan",nameAr:"ملحان"},{id:"2307",name:"Bani Matar",nameAr:"بني مطر"},{id:"2106",name:"Ain",nameAr:"عين"},{id:"2207",name:"Al Dhaher",nameAr:"الظاهر"},{id:"2117",name:"Rudum",nameAr:"رضوم"},{id:"1415",name:"Wald Rabi'",nameAr:"ولد ربيع"},{id:"1710",name:"Aflah Ash Shawm",nameAr:"افلح الشام"},{id:"1722",name:"Ku'aydinah",nameAr:"كعيدنه"},{id:"3103",name:"As Salafiyah",nameAr:"السلفية"},{id:"2915",name:"Amran",nameAr:"عمران"},{id:"2901",name:"Harf Sufyan",nameAr:"حرف سفيان"},{id:"2308",name:"Al Haymah Ad Dakhiliyah",nameAr:"الحيمة الداخلية"},{id:"1809",name:"Ad Dahi",nameAr:"الضحي"},{id:"1812",name:"Bura",nameAr:"براع"},{id:"2214",name:"Kitaf wa Al Boqe'e",nameAr:"كتاف والبقع"},{id:"2213",name:"Al Hashwah",nameAr:"الحشوه"},{id:"3003",name:"Qa'atabah",nameAr:"قعطبة"},{id:"1601",name:"Khabb wa ash Sha'af",nameAr:"خب و الشعف"},{id:"1411",name:"As Sawadiyah",nameAr:"السوادية"},{id:"1418",name:"Ar Ryashyyah",nameAr:"الرياشية"},{id:"3002",name:"Damt",nameAr:"دمت"},{id:"1717",name:"Al Maghrabah",nameAr:"المغربة"},{id:"2804",name:"Al Ghaydah",nameAr:"الغيظه"},{id:"1101",name:"Al Qafr",nameAr:"القفر"},{id:"1402",name:"Nati'",nameAr:"ناطع"},{id:"2513",name:"Al Madaribah Wa Al Arah",nameAr:"المضاربة و العاره"},{id:"2509",name:"Al Musaymir",nameAr:"المسيمير"},{id:"1701",name:"Bakil Al Mir",nameAr:"بكيل المير"},{id:"2105",name:"Usaylan",nameAr:"عسيلان"},{id:"1506",name:"Al  Mukha",nameAr:"المخاء"},{id:"1727",name:"Bani Al Awam",nameAr:"بني العوام"},{id:"1104",name:"An Nadirah",nameAr:"النادرة"},{id:"1810",name:"Bajil",nameAr:"باجل"},{id:"2006",name:"Wusab Al Ali",nameAr:"وصاب العالي"},{id:"2917",name:"Thula",nameAr:"ثلاء"}],r=(a.byId=function(e){return n.find(function(t){return t.id===e})},a.byName=function(e){return n.find(function(t){return t.name===e})},n.map(function(e){return e.id}));a.ids=r},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/format.js":[function(e,t,a){"use strict";function n(e){return e||"number"==typeof e?e+"%":e}function r(e,t){return t=t||20,e.slice(0,t)+"..."}function s(e,t){t=t||25;var a=e.split(" "),n="";return a.length>t&&(a=a.slice(0,t),n="..."),a.join(" ")+n}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=Math.pow(10,t);return Math.round(e*a)/a}var l=e("numeral"),o=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){return(0,o.default)(e).format("0,0")};t.exports.tally=c;var m=function(e){return e>=1e6?(0,o.default)(e/1e6).format("0,0.[00]")+"M":e>=1e3?(0,o.default)(e/1e3).format("0,0.[00]")+"K":c(e)};t.exports.shortTally=m;var u=function(e){return e>=1e6?(0,o.default)(e/1e6).format("0,0")+"M":e>=1e3?(0,o.default)(e/1e3).format("0,0")+"K":c(e)};t.exports.shorterTally=u,t.exports.pct=n,t.exports.shortText=r,t.exports.shortParagraph=s,t.exports.roundedNumber=i;var d=function(e){return"$"+e.toString()};t.exports.currency=d},{numeral:"numeral"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/governorates.js":[function(e,t,a){"use strict";var n=[{yem:"YEM11",name:"Ibb",id:11,nameAr:"إب"},{yem:"YEM16",name:"Al Jawf",id:16,nameAr:"الجوف"},{yem:"YEM18",name:"Al Hodieda",id:18,nameAr:"الحديده"},{yem:"YEM13",name:"Sana'a City",id:13,nameAr:"أمانة العاصمة"},{yem:"YEM12",name:"Abyan",id:12,nameAr:"أبين"},{yem:"YEM14",name:"Al Baidha",id:14,nameAr:"البيضاء"},{yem:"YEM30",name:"Addhale",id:30,nameAr:"الضالع"},{yem:"YEM27",name:"Al Mahweet",id:27,nameAr:"المحويت"},{yem:"YEM28",name:"Al Mahara",id:28,nameAr:"المهره"},{yem:"YEM20",name:"Dhamar",id:20,nameAr:"ذمار"},{yem:"YEM15",name:"Taiz",id:15,nameAr:"تعز"},{yem:"YEM31",name:"Rayma",id:31,nameAr:"ريمة"},{yem:"YEM17",name:"Hajja",id:17,nameAr:"حجه"},{yem:"YEM21",name:"Shabwa",id:21,nameAr:"شبوة"},{yem:"YEM22",name:"Sa'ada",id:22,nameAr:"صعدة"},{yem:"YEM23",name:"Sana'a",id:23,nameAr:"صنعاء"},{yem:"YEM29",name:"Amran",id:29,nameAr:"عمران"},{yem:"YEM25",name:"Laheg",id:25,nameAr:"لحج"},{yem:"YEM26",name:"Mareb",id:26,nameAr:"مأرب"},{yem:"YEM19",name:"Hadramout",id:19,nameAr:"حضرموت"},{yem:"YEM24",name:"Aden",id:24,nameAr:"عدن"}];t.exports.byId=function(e){return e=+e,n.find(function(t){return t.id===e})},t.exports.byYem=function(e){return n.find(function(t){return t.yem===e})},t.exports.byName=function(e){return n.find(function(t){return t.name===e})},t.exports.governorates=n},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/i18n.js":[function(e,t,a){"use strict";function n(e){c=e}function r(e){return"ar"!==e}function s(){return c}function i(){return["en","ar"]}function l(e){return-1!==i().indexOf(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={en:{hello:"Hello"},ar:{hello:"مرحبا"}};a[c][e];var n=a[c][e]||"";return Object.keys(t).forEach(function(e){var a=new RegExp("{"+e+"}","g");n=n.replace(a,t[e])}),n}Object.defineProperty(a,"__esModule",{value:!0}),a.setLanguage=n,a.isLtr=r,a.getLanguage=s,a.getAvailableLanguages=i,a.isValidLanguage=l,a.t=o;var c="en"},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/is-numerical-overlay.js":[function(e,t,a){"use strict";function n(e){return e=e||[],!(0,r.find)(e,function(e){return isNaN(e.value)})}Object.defineProperty(a,"__esModule",{value:!0}),a.isNumerical=n;var r=e("lodash")},{lodash:"lodash"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/location.js":[function(e,t,a){"use strict";function n(e,t){var a=void 0,n=(0,r.get)(e,"district.district");return a=n&&"all"!==n.toLowerCase()?(0,s.byId)(n):(0,i.byId)((0,r.get)(e,"district.governorate")),a&&(a.display="ar"===t?(0,r.get)(a,"nameAr"):(0,r.get)(a,"name")),a}Object.defineProperty(a,"__esModule",{value:!0}),a.default=n;var r=e("object-path"),s=e("./districts"),i=e("./governorates")},{"./districts":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/districts.js","./governorates":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/governorates.js","object-path":"object-path"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js":[function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}Object.defineProperty(a,"__esModule",{value:!0}),a.getFeatureCollection=a.getProjectCentroids=a.hasDistrictData=a.DISTRICT=a.GOVERNORATE=void 0;var r=e("object-path"),s=e("@turf/centroid"),i=function(e){return e&&e.__esModule?e:{default:e}}(s),l=e("./governorates"),o=n(l),c=e("./districts"),m=n(c),u=e("../components/project-card"),d=a.GOVERNORATE="boundary",p=a.DISTRICT="districts",h=a.hasDistrictData=function(e){var t=(0,r.get)(e,"district.district",""),a=t&&"all"!==t.toLowerCase(),n=a&&m.ids.indexOf(t)>=0;return a&&!n&&console.log("No metadata for",t,"falling back to governorate"),n};a.getProjectCentroids=function(e,t){var a=[],n=(0,r.get)(t,p+".features"),s=(0,r.get)(t,d+".features");if(!n||!s||!e.length)return a;var l={};return e.forEach(function(e){((0,r.get)(e,"location",[])||[]).forEach(function(t){var a=h(t),n=a?t.district.district:t.district.governorate;n&&(l[n]=l[n]||{isDistrict:a,projects:[]},l[n].projects.push(e))})}),Object.keys(l).forEach(function(e){var t=void 0,c=void 0;l[e].isDistrict?(t=m.byId(e),c=n.find(function(e){return e.properties.id===t.id})):(t=o.byId(e),c=s.find(function(e){return 1*e.properties.governorat==1*t.yem.substring(3)}));var d=(0,r.get)((0,i.default)(c),"geometry.coordinates");d&&l[e].projects.forEach(function(n){a.push({centroid:[d[1],d[0]],ontime:(0,u.isOntime)(n),region:t.name,name:n.name,name_ar:n.name_ar,id:n.id,isDistrict:l[e].isDistrict})})}),a},a.getFeatureCollection=function(e){return{type:"FeatureCollection",features:e.map(function(e){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[e.centroid[1],e.centroid[0]]}}})}}},{"../components/project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js","./districts":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/districts.js","./governorates":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/governorates.js","@turf/centroid":"@turf/centroid","object-path":"object-path"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/scales.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.customScales=void 0;var n=e("d3-scale");a.customScales={"mapegypt.9rt4vqd5":(0,n.scaleQuantile)().domain([142,10700]).range(["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"])}},{"d3-scale":"d3-scale"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/serialize-csv.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return e.map(function(e){var a=(0,y.default)(e,t);return!!a&&a.display}).filter(Boolean).join(", ")}function s(e,t){return _.concat(e.map(function(e){return[e.name,e.id,(0,f.isOntime)(e),r((0,h.get)(e,"location",[])),(0,h.get)(e,"budget",[]).reduce(function(e,t){return e+(0,h.get)(t,"fund.amount",0)},0),(0,h.get)(e,"number_served.number_served"),(0,h.get)(e,"categories",[]).map(function(e){return e[t]}).join(", "),e.description]}))}function i(e,t){return E.concat([[e.name,e.id,(0,f.isOntime)(e),r((0,h.get)(e,"location",[])),(0,h.get)(e,"budget",[]).reduce(function(e,t){return e+(0,h.get)(t,"fund.amount",0)},0),(0,h.get)(e,"number_served.number_served"),(0,h.get)(e,"category",[]).map(function(e){return e[t]}).join(", "),(0,h.get)(e,"budget",[]).map(function(e){return e.donor_name}).join(", "),e.project_link,(0,h.get)(e,"responsible_ministry."+t),e.local_manager,(0,h.get)(e,"sdg_indicator",[]).map(function(e){return e[t]||e.en}).join(", "),(0,h.get)(e,"sds_indicator",[]).map(function(e){return e[t]||e.en}).join(", "),e.description]])}function l(e){var t=Object.keys(e);return[t].concat([t.map(function(t){return e[t]})])}function o(e){return j.concat(e.map(function(e){return[e.name,e.value,e.link?v.default.baseUrl+"#/"+e.link:""]}))}function c(e){return A.concat(e.map(function(e){return[e.name,e.donor,e.value]}))}function m(e){return N.concat(e.map(function(e){return[e.name,e.planned_start_date,e.actual_start_date,e.planned_end_date]}))}function u(e,t){return w.concat(e.map(function(e){return[e.component,e.kpi,e.status[t],e.target,e.current,e.date]}))}function d(e){return k.concat(e.map(function(e){return[e.governorate,e.district]}))}function p(e){return e.map(function(e){return e.map(function(e){return"string"==typeof e?'"'+e+'"':e}).join(",")}).join("\n")}Object.defineProperty(a,"__esModule",{value:!0}),a.relatedProjects=s,a.project=i,a.summary=l,a.chartData=o,a.disbursement=c,a.ministryActiveProjects=m,a.kmiData=u,a.locations=d,a.serialize=p;var h=e("object-path"),f=e("../components/project-card"),g=e("./location"),y=n(g),b=e("../config"),v=n(b),_=[["name","id","status","location","budget","households","categories","description"]],E=[["name","id","status","location","budget","households","categories","donors","link","responsible ministry","local manager","sdg goals","sds pillars","objective"]],j=[["name","value","link"]],A=[["name","donor","value"]],N=[["name","planned_start_date","actual_start_date","planned_end_date"]],w=[["component","kpi","status","target","current","date"]],k=[["governorate","district"]]},{"../components/project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js","../config":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/config.js","./location":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/location.js","object-path":"object-path"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js":[function(e,t,a){"use strict";t.exports=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/tooltips.js":[function(e,t,a){"use strict";function n(e){return(e.description?'<span class="tooltip__description">Description: '+e.description+"</span>":"")+(e.sources?'<span class="tooltip__sources">Sources: '+e.sources.join(", ")+"</span>":"")}Object.defineProperty(a,"__esModule",{value:!0}),a.indicatorTooltipContent=n},{}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/about.js":[function(e,t,a){"use strict";function n(e){return{meta:e.meta}}var r=e("react"),s=function(e){return e&&e.__esModule?e:{default:e}}(r),i=e("object-path"),l=e("react-redux"),o=e("global"),c=s.default.createClass({displayName:"About",propTypes:{meta:s.default.PropTypes.object},render:function(){var e=(0,i.get)(o.window,"t.about."+this.props.meta.lang,{});return s.default.createElement("section",{className:"inpage"},s.default.createElement("header",{className:"inpage__header--alt"},s.default.createElement("div",{className:"inner"},s.default.createElement("div",{className:"inpage__headline"},s.default.createElement("h1",{className:"inpage__title heading--deco heading--large"},e.title)))),s.default.createElement("div",{className:"inpage__body--alt"},s.default.createElement("div",{className:"inner"},s.default.createElement("section",null,(0,i.get)(e,"body",[]).map(function(e,t){var a=e.hasOwnProperty("text")?e.text:"string"==typeof e?e:"",n=e.hasOwnProperty("class")?e.class:"";return s.default.createElement("p",{key:t,className:n},a)})))))}});t.exports=(0,l.connect)(n)(c)},{global:"global","object-path":"object-path",react:"react","react-redux":"react-redux"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/app.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{api:e.api,meta:e.meta}}var s=e("react"),i=n(s),l=e("react-redux"),o=e("react-router"),c=e("lodash"),m=n(c),u=e("classnames"),d=n(u),p=e("global"),h=e("../utils/i18n"),f=e("../components/page-footer"),g=n(f),y=e("../components/page-header"),b=n(y),v=void 0;p.window&&p.window.location&&p.window.location.reload&&"function"==typeof p.window.location.reload&&(v=!0);var _=i.default.createClass({displayName:"App",propTypes:{routes:i.default.PropTypes.array,children:i.default.PropTypes.object,params:i.default.PropTypes.object,location:i.default.PropTypes.object,api:i.default.PropTypes.object,dispatch:i.default.PropTypes.func,meta:i.default.PropTypes.object},validateLanguage:function(e){(0,h.isValidLanguage)(e)?(0,h.setLanguage)(e):o.hashHistory.replace("/404")},updateLangClass:function(e){if((0,h.isValidLanguage)(e)){document.documentElement.setAttribute("lang",e),document.documentElement.classList.remove("lang--ltr","lang--rtl");var t=(0,h.isLtr)(e)?"lang--ltr":"lang--rtl";document.documentElement.classList.add(t)}},onWindowResize:function(){document.documentElement.clientWidth>=800&&document.documentElement.classList.remove("offcanvas-revealed")},componentWillMount:function(){this.validateLanguage(this.props.params.lang),this.updateLangClass(this.props.params.lang)},componentDidMount:function(){p.window.addEventListener("resize",m.default.throttle(this.onWindowResize,50))},componentWillReceiveProps:function(e){this.validateLanguage(e.params.lang),this.updateLangClass(e.params.lang),this.props.api.authenticated&&!e.api.authenticated&&v&&p.window.location.reload()},render:function(){var e=m.default.get(m.default.last(this.props.routes),"pageClass","");return i.default.createElement("div",{className:(0,d.default)("page",e)},i.default.createElement(b.default,{location:this.props.location,dispatch:this.props.dispatch,authenticated:this.props.api.authenticated,lang:this.props.meta.lang}),i.default.createElement("main",{className:"page__body",role:"main"},this.props.children),i.default.createElement(g.default,{lang:this.props.meta.lang}))}});t.exports=(0,l.connect)(r)(_)},{"../components/page-footer":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/page-footer.js","../components/page-header":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/page-header.js","../utils/i18n":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/i18n.js",classnames:"classnames",global:"global",lodash:"lodash",react:"react","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/category.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{api:e.api,meta:e.meta}}var s=e("react"),i=n(s),l=e("react-redux"),o=e("object-path"),c=e("path"),m=n(c),u=e("../components/share"),d=n(u),p=e("../components/map"),h=n(p),f=e("../components/project-card"),g=n(f),y=e("../components/charts/horizontal-bar"),b=n(y),v=e("../components/print-btn"),_=n(v),E=e("../components/csv-btn"),j=n(E),A=e("../utils/format"),N=e("../utils/slugify"),w=n(N),k=e("../utils/map-utils"),x=e("global"),T=e("../utils/accessors"),P={left:150,right:20,top:10,bottom:50},C=i.default.createClass({displayName:"Category",propTypes:{params:i.default.PropTypes.object,location:i.default.PropTypes.object,api:i.default.PropTypes.object,meta:i.default.PropTypes.object},render:function(){var e=this,t=(0,o.get)(this.props,"api.projects",[]);if(0===t.length)return i.default.createElement("div",null);var a=this.props.meta.lang,n="/"+a,r={},s=t.map(function(e){var t=e.budget.reduce(function(e,t){return e+(0,o.get)(t,"fund.amount",0)},0);return(0,o.get)(e,"categories",[]).map(function(e){var a=e.en;return r[a]=e,{key:a,budget:t}})}).reduce(function(e,t){return e.concat(t)},[]),l={},c={};s.forEach(function(e){var t=e.key;l[t]=l[t]||0,l[t]+=1,c[t]=c[t]||0,c[t]+=e.budget});var u=Object.keys(l).map(function(e){return{name:(0,o.get)(r,[e,a]),link:m.default.resolve(n,"category",(0,w.default)(e)),value:l[e]}}).sort(function(e,t){return t.value>e.value?-1:1}),p=Object.keys(c).map(function(e){return{name:(0,o.get)(r,[e,a]),link:m.default.resolve(n,"category",(0,w.default)(e)),value:c[e]}}).sort(function(e,t){return t.value>e.value?-1:1}),f=this.props.params.name,y=void 0,v=t.filter(function(e){return(0,o.get)(e,"categories",[]).find(function(e){return(0,w.default)(e.en)===f&&(y=e[a],!0)})}),E=(0,k.getProjectCentroids)(v,this.props.api.geography),N=(0,k.getFeatureCollection)(E),C=v.map(function(e){return{name:(0,T.getProjectName)(e,a),link:m.default.resolve(n,"projects",e.id),value:e.budget.reduce(function(e,t){return e+t.fund.amount},0),project:e}}).sort(function(e,t){return t.value>e.value?-1:1}),S=C.map(function(e,t){return{name:e.name,link:e.link,value:g.default.percentComplete(e.project)}}),M=v.map(function(e){return e.budget}).reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return t.fund.amount+e},0),O={title:"Category Summary",data:{budget:M,projects_funded:v.length}},I=[{title:"Comparison of Number of Projects per Category",data:u},{title:"Comparison of Project Funding per Category (US dollars)",data:p},{title:"Category Funding for Projects (US dollars)",data:C},{title:"Category Percentage Complete By Project",data:S}],D=v.length<=1?" category--single":"",R=(0,o.get)(x.window.t,[this.props.meta.lang,"category_pages"],{});return i.default.createElement("section",{className:"inpage category"},i.default.createElement("header",{className:"inpage__header"},i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"inpage__headline"},i.default.createElement("div",{className:"inpage__headline-actions"},i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement(j.default,{title:y,relatedProjects:v,summary:O,chartData:I,lang:a})),i.default.createElement("li",null,i.default.createElement(_.default,{lang:this.props.meta.lang})),i.default.createElement("li",null,i.default.createElement(d.default,{path:this.props.location.pathname,lang:this.props.meta.lang})))),i.default.createElement("h1",{className:"inpage__title heading--deco heading--large"},y)),i.default.createElement("div",{className:"inpage__header-data"},i.default.createElement("ul",{className:"inpage-stats"},i.default.createElement("li",null," ",(0,A.currency)((0,A.shortTally)(M))," ",i.default.createElement("small",null,R.stat_one)),i.default.createElement("li",null," ",(0,A.tally)(v.length)," ",i.default.createElement("small",null,D?R.cat_stats_funded_1:R.cat_stats_funded_2," ",R.cat_stats_funded_3)))))),i.default.createElement("div",{className:"inpage__body"},i.default.createElement("div",{className:"inner"},i.default.createElement(h.default,{markers:E,location:N,lang:a}),i.default.createElement("section",{className:"inpage__section"},i.default.createElement("h1",{className:"section__title heading--small"},R.comparison_title),i.default.createElement("div",{className:"chart-content chart__inline--labels"},i.default.createElement("h3",null,R.comparison_chart_title1),i.default.createElement(b.default,{lang:this.props.meta.lang,data:u,yFormat:A.shortText,margin:P,activeProject:y})),i.default.createElement("div",{className:"chart-content chart__inline--labels"},i.default.createElement("h3",null,R.comparison_chart_title2),i.default.createElement(b.default,{lang:this.props.meta.lang,data:p,margin:P,yFormat:A.shortText,xFormat:A.shortTally,activeProject:y}))),i.default.createElement("section",{className:"inpage__section"},i.default.createElement("h1",{className:"section__title heading--small"},y," ",R.projects_parttitle),i.default.createElement("div",{className:"chart-content chart__inline--labels"},!D&&i.default.createElement("h3",null,R.category_funding_chart_title),!D&&i.default.createElement(b.default,{lang:this.props.meta.lang,data:C,margin:P,xFormat:A.shortTally,yFormat:A.shortText})),i.default.createElement("div",{className:"chart-content chart__inline--labels"},!D&&i.default.createElement("h3",null,R.category_complete_chart_title),!D&&i.default.createElement(b.default,{lang:this.props.meta.lang,data:S,margin:P,yTitle:"",xFormat:A.pct,yFormat:A.shortText})),i.default.createElement("ul",{className:"projects-list"},v.map(function(t){return i.default.createElement("li",{key:t.id,className:"projects-list__card"},i.default.createElement(g.default,{lang:e.props.meta.lang,project:t}))}))))))}});t.exports=(0,l.connect)(r)(C)},{"../components/charts/horizontal-bar":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/horizontal-bar.js","../components/csv-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/csv-btn.js","../components/map":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/map.js","../components/print-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/print-btn.js","../components/project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js","../components/share":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/share.js","../utils/accessors":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/accessors.js","../utils/format":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/format.js","../utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js","../utils/slugify":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js",global:"global","object-path":"object-path",path:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/path-browserify/index.js",react:"react","react-redux":"react-redux"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/contact.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),r=function(e){return e&&e.__esModule?e:{default:e}}(n),s=r.default.createClass({displayName:"Contact",render:function(){return r.default.createElement("div",null,r.default.createElement("h1",null,"Contact"))}});a.default=s},{react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/donor.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{api:e.api,meta:e.meta}}var s=e("react"),i=n(s),l=e("path"),o=n(l),c=e("react-redux"),m=e("object-path"),u=e("../components/csv-btn"),d=n(u),p=e("../components/share"),h=n(p),f=e("../components/map"),g=n(f),y=e("../components/project-card"),b=n(y),v=e("../components/charts/horizontal-bar"),_=n(v),E=e("../components/print-btn"),j=n(E),A=e("../utils/format"),N=e("../utils/slugify"),w=n(N),k=e("../utils/map-utils"),x=e("global"),T=i.default.createClass({displayName:"Donor",propTypes:{params:i.default.PropTypes.object,location:i.default.PropTypes.object,api:i.default.PropTypes.object,meta:i.default.PropTypes.object},render:function(){var e=(0,m.get)(this.props,"api.projects",[]);if(0===e.length)return i.default.createElement("div",null);var t=this.props.meta.lang,a="/"+t,n=this.props.params.name,r=void 0,s=e.filter(function(e){return(0,m.get)(e,"budget",[]).some(function(e){console.log(e);var t=(0,w.default)(e.donor_name);return t===n&&(r=e),t===n})}),l="ar"===t?r.donor_name_ar:r.donor_name,c=(0,k.getProjectCentroids)(s,this.props.api.geography),u=(0,k.getFeatureCollection)(c),p=s.map(function(e){return e.budget}).reduce(function(e,t){
return e.concat(t)},[]),f=s.map(function(e){return{name:e.name,link:o.default.resolve(a,"projects",e.id),value:e.budget.reduce(function(e,t){return e+t.fund.amount},0)}}).sort(function(e,t){return t.value>e.value?-1:1}),y=p.reduce(function(e,t){return t.fund.amount+e},0),v={title:"Donor Summary",data:{budget:y,projects_funded:s.length}},E=[{title:"Donor Project Funding",data:f}],N=s.length<=1?" funding--single":"",T=(0,m.get)(x.window.t,[t,"donor_pages"],{});return i.default.createElement("section",{className:"inpage funding"},i.default.createElement("header",{className:"inpage__header"},i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"inpage__headline"},i.default.createElement("div",{className:"inpage__headline-actions"},i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement(d.default,{title:l,relatedProjects:s,summary:v,chartData:E,lang:t})),i.default.createElement("li",null,i.default.createElement(j.default,{lang:t})),i.default.createElement("li",null,i.default.createElement(h.default,{path:this.props.location.pathname,lang:t})))),i.default.createElement("h1",{className:"inpage__title heading--deco heading--large"},l)))),i.default.createElement("div",{className:"inpage__body funding"+N},i.default.createElement("div",{className:"inner"},i.default.createElement("section",{className:"inpage__section inpage__section--overview"},i.default.createElement("h1",{className:"visually-hidden"},"Project Overview"),i.default.createElement("div",{className:"inpage__col--map"},i.default.createElement(g.default,{markers:c,location:u,lang:t})),i.default.createElement("div",{className:"inpage__col--content"},i.default.createElement("ul",{className:"inpage-stats"},i.default.createElement("li",null," ",(0,A.currency)((0,A.shortTally)(y))," ",i.default.createElement("small",null,T.donor_stats_funds)),i.default.createElement("li",null," ",(0,A.tally)(s.length)," ",i.default.createElement("small",null,N?T.donor_stats_funded_1:T.donor_stats_funded_2," ",T.donor_stats_funded_3))),!N&&i.default.createElement("div",{className:"inpage__overview-chart"},i.default.createElement("div",{className:"chart-content"},i.default.createElement(_.default,{lang:t,data:f,margin:{left:130,right:50,top:10,bottom:50},xFormat:A.shortTally,yFormat:A.shortText})))))),i.default.createElement("section",{className:"inpage__section--bleed inpage__section--print"},i.default.createElement("div",{className:"inner"},i.default.createElement("h1",{className:"section__title heading--small"},T.funded_title),i.default.createElement("ul",{className:"projects-list"},s.map(function(e){return i.default.createElement("li",{key:e.id,className:"projects-list__card"},i.default.createElement(b.default,{lang:t,project:e}))}))))))}});t.exports=(0,c.connect)(r)(T)},{"../components/charts/horizontal-bar":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/horizontal-bar.js","../components/csv-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/csv-btn.js","../components/map":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/map.js","../components/print-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/print-btn.js","../components/project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js","../components/share":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/share.js","../utils/format":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/format.js","../utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js","../utils/slugify":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js",global:"global","object-path":"object-path",path:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/path-browserify/index.js",react:"react","react-redux":"react-redux"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/elements.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),r=function(e){return e&&e.__esModule?e:{default:e}}(n),s=r.default.createClass({displayName:"Elements",render:function(){return r.default.createElement("div",{className:"row row--centered"},r.default.createElement("h1",{className:"heading--xlarge heading--deco"},"This is a headline deco"),r.default.createElement("h2",{className:"heading--large heading--deco"},"This is a headline deco"),r.default.createElement("h3",{className:"heading--medium heading--deco"},"This is a headline deco"),r.default.createElement("h4",{className:"heading--small"},"This is a headline"),r.default.createElement("hr",null),r.default.createElement("p",null,r.default.createElement("a",{href:"#",className:"link--primary"},r.default.createElement("span",null,"Primary link"))),r.default.createElement("p",null,r.default.createElement("a",{href:"#",className:"link--secondary"},"secondary link")),r.default.createElement("p",null,r.default.createElement("a",{href:"#",className:"link--deco"},"Deco link")),r.default.createElement("p",null,r.default.createElement("a",{href:"#",className:"link--deco link--deco-active"},"Deco link active")),r.default.createElement("hr",null),r.default.createElement("p",null,r.default.createElement("button",{className:"button button--base"},"Base")),r.default.createElement("p",null,r.default.createElement("button",{className:"button button--primary"},"Primary")),r.default.createElement("p",null,r.default.createElement("button",{className:"button button--primary drop__toggle--caret"},"Primary")),r.default.createElement("p",null,r.default.createElement("button",{className:"button button--base-bounded"},"Base bounded")),r.default.createElement("p",null,r.default.createElement("button",{className:"button button--primary-bounded"},"Primary bounded")),r.default.createElement("hr",null),r.default.createElement("div",{className:"button-group button-group--horizontal"},r.default.createElement("button",{className:"button button--primary"},"Primary"),r.default.createElement("button",{className:"button button--primary-bounded"},"Primary bounded")),r.default.createElement("hr",null),r.default.createElement("div",{className:"filters"},r.default.createElement("label",{className:"heading--label"},"Sort By:"),r.default.createElement("button",{className:"button button--medium button--secondary drop__toggle--caret"},"Category")),r.default.createElement("hr",null),r.default.createElement("div",{style:{width:"20rem"}},r.default.createElement("article",{className:"card project--ontime"},r.default.createElement("div",{className:"card__contents"},r.default.createElement("header",{className:"card__header"},r.default.createElement("p",{className:"card__subtitle"},r.default.createElement("a",{className:"link--secondary",href:""},"Category")),r.default.createElement("h1",{className:"card__title"},r.default.createElement("a",{className:"link--deco",href:""},"Project Name")),r.default.createElement("ul",{className:"card-cmplt"},r.default.createElement("li",null,r.default.createElement("span",null,"60% cmplt")))),r.default.createElement("div",{className:"card__body"},r.default.createElement("dl",{className:"card-meta"},r.default.createElement("dt",{className:"card-meta__label"},"Status"),r.default.createElement("dd",{className:"card-meta__value card-meta__value--status"},"On time"),r.default.createElement("dt",{className:"card-meta__label"},"Location"),r.default.createElement("dd",{className:"card-meta__value card-meta__value--location"},"Location 1, Location 2")),r.default.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris et dui gravida, posuere diam id, congue augue. Pellentesque nec purus ex. Vestibulum ante."),r.default.createElement("ul",{className:"card-stats"},r.default.createElement("li",null,"$50M ",r.default.createElement("small",null,"funding")),r.default.createElement("li",null,"20,000 ",r.default.createElement("small",null,"households"))))))),r.default.createElement("hr",null),r.default.createElement("fieldset",{className:"form__fieldset"},r.default.createElement("div",{className:"form__group"},r.default.createElement("label",{className:"form__label"},"Checkbox options (custom)"),r.default.createElement("label",{className:"form__option form__option--custom-checkbox"},r.default.createElement("input",{type:"checkbox",name:"form-checkbox",id:"form-checkbox-1",value:"Checkbox 1"}),r.default.createElement("span",{className:"form__option__text"},"Checkbox 1"),r.default.createElement("span",{className:"form__option__ui"})),r.default.createElement("label",{className:"form__option form__option--custom-checkbox"},r.default.createElement("input",{type:"checkbox",name:"form-checkbox",value:"form-checkbox-2"}),r.default.createElement("span",{className:"form__option__text"},"Checkbox 2"),r.default.createElement("span",{className:"form__option__ui"})),r.default.createElement("label",{className:"form__option form__option--custom-checkbox"},r.default.createElement("input",{type:"checkbox",name:"form-checkbox",value:"form-checkbox-3"}),r.default.createElement("span",{className:"form__option__text"},"Checkbox 3"),r.default.createElement("span",{className:"form__option__ui"})))),r.default.createElement("fieldset",{className:"form__fieldset"},r.default.createElement("legend",{className:"form__legend"},"Inputs"),r.default.createElement("div",{className:"form__group"},r.default.createElement("label",{className:"form__label",htmlFor:"form-input-5"},"Input group"),r.default.createElement("div",{className:"form__input-group"},r.default.createElement("input",{type:"text",className:"form__control form__control--medium",id:"form-input-5",placeholder:"This is a placeholder"}),r.default.createElement("span",{className:"form__input-group-button"},r.default.createElement("button",{type:"submit",className:"button button--primary button--text-hidden button--medium button--search-icon"},r.default.createElement("span",null,"Button"))))),r.default.createElement("div",{className:"form__group"},r.default.createElement("label",{className:"form__label",htmlFor:"form-input-6"},"Input group"),r.default.createElement("div",{className:"form__input-group"},r.default.createElement("input",{type:"text",className:"form__control form__control--medium",id:"form-input-6",placeholder:"Search location"}),r.default.createElement("span",{className:"form__input-group-button"},r.default.createElement("button",{type:"submit",className:"button button--primary button--text-hidden button--medium button--newsletter-icon"},r.default.createElement("span",null,"Button")))))),r.default.createElement("div",{className:"filters"},r.default.createElement("label",{className:"heading--label"},"Filters"),r.default.createElement("button",{className:"button button--small button--filter-tag"},"Category"),r.default.createElement("button",{className:"button button--small button--filter-tag"},"Project Type"),r.default.createElement("button",{className:"button button--xsmall button--filter-clear"},"Clear Filters")))}});a.default=s},{react:"react"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/home.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{api:e.api,meta:e.meta}}var s=e("react"),i=n(s),l=e("react-redux"),o=e("react-router"),c=e("../utils/format"),m=e("object-path"),u=e("path"),d=n(u),p=e("global"),h=e("../components/map"),f=n(h),g=e("../components/charts/horizontal-bar"),y=n(g),b=e("../components/charts/pie"),v=n(b),_=e("../components/project-card"),E=e("../utils/map-utils"),j=e("../utils/slugify"),A=n(j),N={left:200,right:10,top:10,bottom:50},w=i.default.createClass({displayName:"Home",propTypes:{api:i.default.PropTypes.object,meta:i.default.PropTypes.object},render:function(){var e=this.props.api.projects,t=this.props.meta.lang,a={},n={ontime:0,delayed:0,extended:0};e.forEach(function(e){((0,m.get)(e,"categories",[])||[]).forEach(function(e){a[e[t]]=a[e[t]]+1||1});var r=(0,_.isOntime)(e);null!==r&&("delayed"===r?n.delayed+=1:"extended"===r?n.extended+=1:n.ontime+=1)});var r=(0,E.getProjectCentroids)(e,this.props.api.geography),s="/"+this.props.meta.lang,l=Object.keys(a).map(function(e){return{name:e,link:d.default.resolve(s,"category",(0,A.default)(e)),value:a[e]}}).sort(function(e,t){return t.value>e.value?-1:1}),u=e.length,h={},g=0,b=[],j=0;e.forEach(function(e){var t=(e.budget||[]).filter(function(e){return"MoALR / Government of Egypt contribution"!==e.donor_name&&"Government of Egypt"!==e.donor_name&&"Project Beneficiaries"!==e.donor_name});t.length>1&&(t.forEach(function(e){return b.push(e.donor_name)}),j+=1),(e.budget||[]).forEach(function(e){h[e.donor_name]="",g+=e.fund.amount||0})}),g=(0,c.shorterTally)(g),h=Object.keys(h).length;var w=[{name:"On Time",value:n.ontime},{name:"Delayed",value:n.delayed},{name:"Extended",value:n.extended}],k=(0,m.get)(p.window.t,[t,"homepage"],{});return i.default.createElement("div",null,i.default.createElement("section",{className:"inpage home"},i.default.createElement("header",{className:"inpage__header"},i.default.createElement("div",{className:"inner"},i.default.createElement("p",{className:"inpage__subtitle--alt"},k.subhead),i.default.createElement("h1",{className:"inpage__title heading--deco heading--xxlarge"},k.title),i.default.createElement("div",{className:"inpage__introduction"},i.default.createElement("p",{className:"inpage__description"},k.description),i.default.createElement(o.Link,{to:s+"/about",type:"button",className:"button button--primary button--large"},k.more)))),i.default.createElement("div",{className:"inpage__body"},i.default.createElement("div",{className:"inner"},i.default.createElement(f.default,{markers:r,lang:t}),i.default.createElement("section",{className:"inpage__section"},i.default.createElement("div",{className:"overview-home"},i.default.createElement("h2",{className:"section__title"},k.stats_overview),i.default.createElement("p",{className:"section__description"},k.overview_description),i.default.createElement("ul",{className:"category-stats"},i.default.createElement("li",{className:"category-stats__item"},i.default.createElement("h3",{className:"inpage-stats heading--deco-small"},u,i.default.createElement("small",null,k.total_projects))),i.default.createElement("li",{className:"category-stats__item"},i.default.createElement("h3",{className:"inpage-stats heading--deco-small"},"$",g,i.default.createElement("small",null,k.in_funding))),i.default.createElement("li",{className:"category-stats__item"},i.default.createElement("h3",{className:"inpage-stats heading--deco-small"},h,i.default.createElement("small",null,k.total_donors))),i.default.createElement("li",{className:"category-stats__item"},i.default.createElement("h3",{className:"inpage-stats heading--deco-small"},j,i.default.createElement("small",null,k.donor_collaborations))))),i.default.createElement("div",{className:"overview-home-charts"},i.default.createElement("div",{className:"chart-content chart__inline--labels"},i.default.createElement("h3",null,k.chart_title_one),i.default.createElement(y.default,{lang:t,data:l,margin:N,yFormat:c.shortText,xFormat:c.tally,yTitle:""})),i.default.createElement("div",{className:"chart-content chart__inline--labels chart-content--status"},i.default.createElement("h3",null,k.chart_title_two),i.default.createElement(v.default,{data:w}),i.default.createElement("div",{className:"status-key"},i.default.createElement("p",{className:"status-key__label status-ontime"},k.chart_two_label),i.default.createElement("p",{className:"status-key__label status-delayed"},k.chart_two_label2),i.default.createElement("p",{className:"status-key__label status-extended"},k.chart_two_label3)))),i.default.createElement("div",{className:"section__footer"},i.default.createElement(o.Link,{to:s+"/projects",type:"button",className:"button button--primary button--large"},k.all_projects_btn)))),i.default.createElement("section",{className:"inpage__section--bleed"},i.default.createElement("h2",{className:"section__title"},k.other_indicators_title),i.default.createElement("p",{className:"section__description"},k.other_indicators_description),i.default.createElement("ul",{className:"section__footer"},i.default.createElement("li",null,i.default.createElement(o.Link,{to:"/"+t+"/projects_sdg",type:"button",className:"button button--primary button--large"},k.sdg_button)),i.default.createElement("li",null,i.default.createElement(o.Link,{to:"/"+t+"/projects_other",type:"button",className:"button button--primary button--large"},k.other_button)))))))}});t.exports=(0,l.connect)(r)(w)},{"../components/charts/horizontal-bar":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/horizontal-bar.js","../components/charts/pie":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/pie.js","../components/map":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/map.js","../components/project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js","../utils/format":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/format.js","../utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js","../utils/slugify":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js",global:"global","object-path":"object-path",path:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/path-browserify/index.js",react:"react","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/ministry.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{api:e.api,meta:e.meta}}var s=e("react"),i=n(s),l=e("path"),o=n(l),c=e("react-redux"),m=e("object-path"),u=e("../components/csv-btn"),d=n(u),p=e("../components/share"),h=n(p),f=e("../components/print-btn"),g=n(f),y=e("../components/map"),b=n(y),v=e("../components/project-card"),_=n(v),E=e("../components/charts/horizontal-bar"),j=n(E),A=e("../components/project-timeline"),N=n(A),w=e("../utils/format"),k=e("../utils/slugify"),x=n(k),T=e("../utils/map-utils"),P=e("../utils/accessors"),C=i.default.createClass({displayName:"Ministry",propTypes:{params:i.default.PropTypes.object,location:i.default.PropTypes.object,api:i.default.PropTypes.object,meta:i.default.PropTypes.object},render:function(){var e=(0,m.get)(this.props,"api.projects",[]);if(0===e.length)return i.default.createElement("div",null);var t=this.props.meta.lang,a="/"+t,n=this.props.params.name,r=e.filter(function(e){return(0,m.get)(e,"responsible_ministry.en")&&n===(0,x.default)(e.responsible_ministry.en)}),s=(0,m.get)(r,[0,"responsible_ministry",t]),l=(0,T.getProjectCentroids)(r,this.props.api.geography),c=(0,T.getFeatureCollection)(l),u=r.map(function(e){return{name:(0,P.getProjectName)(e,t),link:o.default.resolve(a,"projects",e.id),value:e.number_served.number_served}}).sort(function(e,t){return t.value>e.value?-1:1}),p=r.length<=1?" funding--single":"",f=r.filter(function(e){return e.actual_end_date}),y=f.length,v={title:"Ministry Summary",data:{active_projects:y,total_projects:r.length}},E=[{title:"Number Served Per Project",data:u}];return i.default.createElement("section",{className:"inpage owner"},i.default.createElement("header",{className:"inpage__header"},i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"inpage__headline"},i.default.createElement("div",{className:"inpage__headline-actions"},i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement(d.default,{title:s,relatedProjects:r,summary:v,ministryActiveProjects:f,chartData:E,lang:t})),i.default.createElement("li",null,i.default.createElement(g.default,{lang:t})),i.default.createElement("li",null,i.default.createElement(h.default,{path:this.props.location.pathname,lang:t})))),i.default.createElement("h1",{className:"inpage__title heading--deco heading--large"},s)),r.map(function(e,a){if(!e.actual_end_date)return i.default.createElement("div",{key:"timeline-"+a},i.default.createElement("h5",null,(0,P.getProjectName)(e)),i.default.createElement(N.default,{project:e,lang:t}))}))),i.default.createElement("div",{className:"inpage__body funding"+p},i.default.createElement("div",{className:"inner"},i.default.createElement("section",{className:"inpage__section inpage__section--overview"},i.default.createElement("h1",{className:"visually-hidden"},"Project Overview"),i.default.createElement("div",{className:"inpage__col--map"},i.default.createElement(b.default,{markers:l,location:c,lang:t})),i.default.createElement("div",{className:"inpage__col--content"},i.default.createElement("ul",{className:"inpage-stats"},i.default.createElement("li",null," ",y," ",i.default.createElement("small",null,"Active ",y>1?"Projects":"Project")),i.default.createElement("li",null," ",r.length," ",i.default.createElement("small",null,"Total ",r.length>1?"Projects":"Project"))),i.default.createElement("div",{className:"inpage__overview-chart"},u.length>1&&i.default.createElement("div",{className:"chart-content"},i.default.createElement("h3",null,"Number Served"),i.default.createElement(j.default,{lang:t,data:u,margin:{left:140,right:50,top:10,bottom:50},xFormat:w.shortTally,yFormat:w.shortText})))))),i.default.createElement("section",{className:"inpage__section--bleed inpage__section--print"},i.default.createElement("div",{className:"inner"},i.default.createElement("h1",{className:"section__title heading--small"},"Projects Overseen"),i.default.createElement("ul",{className:"projects-list"},r.map(function(e){return i.default.createElement("li",{key:e.id,className:"projects-list__card"},i.default.createElement(_.default,{lang:t,project:e}))}))))))}});t.exports=(0,c.connect)(r)(C)},{"../components/charts/horizontal-bar":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/horizontal-bar.js","../components/csv-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/csv-btn.js","../components/map":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/map.js","../components/print-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/print-btn.js","../components/project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js","../components/project-timeline":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-timeline.js","../components/share":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/share.js","../utils/accessors":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/accessors.js","../utils/format":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/format.js","../utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js","../utils/slugify":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js","object-path":"object-path",path:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/path-browserify/index.js",react:"react","react-redux":"react-redux"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/owner.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{api:e.api,meta:e.meta}}var s=e("react"),i=n(s),l=e("path"),o=n(l),c=e("react-redux"),m=e("object-path"),u=e("../components/csv-btn"),d=n(u),p=e("../components/share"),h=n(p),f=e("../components/print-btn"),g=n(f),y=e("../components/map"),b=n(y),v=e("../components/project-card"),_=n(v),E=e("../components/charts/horizontal-bar"),j=n(E),A=e("../utils/format"),N=e("../utils/map-utils"),w=e("../utils/slugify"),k=n(w),x=e("../utils/accessors"),T=i.default.createClass({displayName:"Owner",propTypes:{params:i.default.PropTypes.object,location:i.default.PropTypes.object,api:i.default.PropTypes.object,meta:i.default.PropTypes.object},render:function(){var e=this,t=(0,m.get)(this.props,"api.projects",[]);if(0===t.length)return i.default.createElement("div",null);var a="/"+this.props.meta.lang,n=this.props.params.name,r=t.filter(function(e){return e.local_manager&&n===(0,k.default)(e.local_manager)}),s=this.props.meta.lang,l="ar"===s?(0,m.get)(r,"0.local_manager_ar"):(0,m.get)(r,"0.local_manager"),c=(0,N.getProjectCentroids)(r,this.props.api.geography),u=(0,N.getFeatureCollection)(c),p=r.map(function(e){return{name:(0,x.getProjectName)(e,s),link:o.default.resolve(a,"projects",e.id),value:e.number_served.number_served}}).sort(function(e,t){return t.value>e.value?-1:1}),f=r.length<=1?" funding--single":"",y=r.filter(function(e){return e.actual_end_date}).length,v={title:"Owner Summary",data:{active_projects:y,total_projects:r.length}},E=[{title:"Number Served Per Project",data:p}];return i.default.createElement("section",{className:"inpage owner"},i.default.createElement("header",{className:"inpage__header"},i.default.createElement("div",{className:"inner"},i.default.createElement("div",{className:"inpage__headline"},i.default.createElement("div",{className:"inpage__headline-actions"},i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement(d.default,{title:l,relatedProjects:r,summary:v,chartData:E,lang:s})),i.default.createElement("li",null,i.default.createElement(g.default,{lang:this.props.meta.lang})),i.default.createElement("li",null,i.default.createElement(h.default,{path:this.props.location.pathname,lang:this.props.meta.lang})))),i.default.createElement("h1",{className:"inpage__title heading--deco heading--large"},l)))),i.default.createElement("div",{className:"inpage__body funding"+f},i.default.createElement("div",{className:"inner"},i.default.createElement("section",{className:"inpage__section inpage__section--overview"},i.default.createElement("h1",{className:"visually-hidden"},"Project Overview"),i.default.createElement("div",{className:"inpage__col--map"},i.default.createElement(b.default,{markers:c,location:u,lang:s})),i.default.createElement("div",{className:"inpage__col--content"},i.default.createElement("ul",{className:"inpage-stats"},i.default.createElement("li",null," ",y," ",i.default.createElement("small",null,"Active ",y>1?"Projects":"Project")),i.default.createElement("li",null," ",r.length," ",i.default.createElement("small",null,"Total ",r.length>1?"Projects":"Project"))),!f&&i.default.createElement("div",{className:"inpage__overview-chart"},i.default.createElement("div",{className:"chart-content"},i.default.createElement("h3",null,"Number Served"),i.default.createElement(j.default,{lang:this.props.meta.lang,data:p,margin:{left:300,right:50,top:10,bottom:50},xFormat:A.shortTally,yFormat:A.shortText})))))),i.default.createElement("section",{className:"inpage__section--bleed inpage__section--print"},i.default.createElement("div",{className:"inner"},i.default.createElement("h1",{className:"section__title heading--small"},"Projects Contributed To"),i.default.createElement("ul",{className:"projects-list"},r.map(function(t){return i.default.createElement("li",{key:t.id,className:"projects-list__card"},i.default.createElement(_.default,{lang:e.props.meta.lang,project:t}))}))))))}});t.exports=(0,c.connect)(r)(T)},{"../components/charts/horizontal-bar":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/horizontal-bar.js","../components/csv-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/csv-btn.js","../components/map":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/map.js","../components/print-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/print-btn.js","../components/project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js","../components/share":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/share.js","../utils/accessors":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/accessors.js","../utils/format":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/format.js","../utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js","../utils/slugify":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js","object-path":"object-path",path:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/path-browserify/index.js",react:"react","react-redux":"react-redux"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/project-browse.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};return e.forEach(function(e){var n=t?(0,c.get)(e,t,"--"):e;a[n]=a[n]||0,a[n]+=1}),a}function s(e){return{api:e.api,meta:e.meta}}var i=e("react"),l=n(i),o=e("react-redux"),c=e("object-path"),m=e("lodash"),u=e("react-tooltip"),d=n(u),p=e("../actions"),h=e("../components/map"),f=n(h),g=e("../components/print-btn"),y=n(g),b=e("../components/csv-btn"),v=n(b),_=e("../components/project-list"),E=n(_),j=e("../components/auto-suggest"),A=n(j),N=e("../components/project-card"),w=e("../utils/governorates"),k=e("../utils/map-utils"),x=e("../utils/slugify"),T=n(x),P=e("../utils/tooltips"),C=e("../components/charts/horizontal-bar"),S=n(C),M=e("global"),O=["sdg","other"],I={left:75,right:20,top:10,bottom:50},D=new RegExp(/[0-9]+/),R=function(e,t){var a=e.match(D);if(!a)return e<t?-1:1;var n=t.match(D);return n?Number(a[0])>Number(n[0])?1:-1:void 0},L={translationPath:"project_status",items:function(e,t,a){return[{display:a.status_ontime,filter:function(e){return"delayed"!==(0,N.isOntime)(e)}},{display:a.status_delayed,filter:function(e){return"delayed"===(0,N.isOntime)(e)}}]}},F={translationPath:"category",items:function(e,t){var a=r(e.reduce(function(e,t){return e.concat(t.categories)},[]),t);return Object.keys(a).map(function(e){return{display:e+" ("+a[e]+")",filter:function(a){return Array.isArray(a.categories)&&a.categories.map(function(e){return e[t]}).indexOf(e)>=0}}})}},z={translationPath:"donor",items:function(e,t){var a="ar"===t?"donor_name_ar":"donor_name",n=r(e.reduce(function(e,t){return e.concat(t.budget)},[]),a);return Object.keys(n).map(function(e){return{display:e+" ("+n[e]+")",filter:function(t){return Array.isArray(t.budget)&&t.budget.find(function(t){return t[a]===e})}}})}},H={translationPath:"sdg_goals",items:function(e,t){var a=r(e.reduce(function(e,t){return e.concat(t.sdg_indicators)},[]),t);return Object.keys(a).map(function(e){return e}).sort().map(function(e){return{display:e+" ("+a[e]+")",filter:function(a){return Array.isArray(a.sdg_indicators)&&a.sdg_indicators.map(function(e){return e[t]}).indexOf(e)>=0}}})}},B=[L,F,z,H],q=l.default.createClass({displayName:"ProjectBrowse",getInitialState:function(){return{modal:!1,activeModal:null,indicatorToggle:!1,listView:!1,activeIndicatorType:null,activeIndicatorTheme:null,selectedIndicators:[],activeIndicators:[],activeIndicator:null,activeGovernorate:null,selectedProjectFilters:[],activeProjectFilters:[],projectsHidden:!1}},propTypes:{api:l.default.PropTypes.object,meta:l.default.PropTypes.object,location:l.default.PropTypes.object,dispatch:l.default.PropTypes.func,route:l.default.PropTypes.object},componentWillMount:function(){var e=(0,c.get)(this.props,"route.modal");e&&this.setState({modal:!0,activeModal:"indicators",activeIndicatorType:e})},
componentDidUpdate:function(){d.default.rebuild()},componentWillUpdate:function(e,t){var a=t.activeIndicator;if(a&&a!==this.state.activeIndicator){var n=this.props.api.indicators.find(function(e){return e.name===a||e.name_ar===a});n&&n.id&&this.props.dispatch((0,p.getIndicator)(n.id))}t.modal?document.documentElement.classList.add("disable--page-scroll"):document.documentElement.classList.remove("disable--page-scroll")},zoomToGovernorate:function(e,t){var a=t.suggestion;this.setState({activeGovernorate:a})},openIndicatorDropdown:function(){this.setState({indicatorToggle:!0})},closeIndicatorDropdown:function(e){var t=this;setTimeout(function(){t.setState({indicatorToggle:!1})},200)},openIndicatorSelector:function(e){e=e.split(" ")[0],this.setState({modal:!0,activeModal:"indicators",indicatorToggle:!1,activeIndicatorType:e,selectedIndicators:this.state.activeIndicators.length?(0,m.clone)(this.state.activeIndicators):[]})},cancelIndicators:function(){this.setState({modal:!1,activeIndicatorType:null,activeIndicatorTheme:null,selectedIndicators:this.state.activeIndicators.length?(0,m.clone)(this.state.activeIndicators):[]})},confirmIndicators:function(){var e=this.state.selectedIndicators.length?(0,m.clone)(this.state.selectedIndicators):[];this.setState({modal:!1,activeIndicatorType:null,activeIndicatorTheme:null,activeIndicators:e,activeIndicator:e.length?e[0]:null})},selectIndicatorSubType:function(e){this.setState({activeIndicatorTheme:e})},setActiveIndicator:function(e){this.setState({activeIndicator:e})},removeActiveIndicator:function(e){var t=this.state,a=t.activeIndicator,n=t.activeIndicators,r=(0,m.without)(n,e),s=a!==e?a:r.length?r[0]:null;this.setState({activeIndicators:r,activeIndicator:s})},openProjectSelector:function(){this.setState({modal:!0,indicatorToggle:!1,activeModal:"projects",selectedProjectFilters:this.state.activeProjectFilters.length?(0,m.clone)(this.state.activeProjectFilters):[]})},toggleSelectedIndicator:function(e){var t=this.state.selectedIndicators;t=t.indexOf(e)>=-0?(0,m.without)(t,e):t.concat([e]),this.setState({selectedIndicators:t})},cancelFilters:function(){this.setState({modal:!1,selectedProjectFilters:this.state.activeProjectFilters.length?(0,m.clone)(this.state.activeProjectFilters):[]})},confirmFilters:function(){this.setState({modal:!1,activeProjectFilters:this.state.selectedProjectFilters.length?(0,m.clone)(this.state.selectedProjectFilters):[]})},resetProjectFilters:function(){this.setState({selectedProjectFilters:[]})},clearProjectFilters:function(){this.setState({selectedProjectFilters:[],activeProjectFilters:[]})},toggleSelectedFilter:function(e){var t=this.state.selectedProjectFilters,a=t.map(function(e){return e.display}).indexOf(e.display);a>=0?t.splice(a,1):t=t.concat([e]),this.setState({selectedProjectFilters:t})},removeActiveFilter:function(e){var t=this.state.activeProjectFilters,a=t.map(function(e){return e.display}).indexOf(e.display);t.splice(a,1),this.setState({activeProjectFilters:t})},toggleProjects:function(){this.setState({projectsHidden:!this.state.projectsHidden,selectedProjectFilters:[],activeProjectFilters:[]})},closeModal:function(){this.setState({modal:!1,activeModal:null})},selectListView:function(){this.setState({listView:!0})},selectMapView:function(){this.setState({listView:!1})},createOverlay:function(e){if(!e)return null;var t=e.id,a=e.data,n={id:t,category:a.category,units:a.units};if("string"==typeof a.data)return n.mapid=a.data,n;var r=!a.hasOwnProperty("data_geography")||a.data_geography?k.GOVERNORATE:k.DISTRICT,s=(0,c.get)(this.props.api,"geography."+r);return s?(n.values=a.data.map(function(e){return{id:e.sub_nat_id,value:e.data_value}}).filter(function(e){return void 0!==e.value}),n.regions=s,n):null},renderIndicatorSelector:function(){var e=this,t=this.state,a=t.selectedIndicators,n=t.activeIndicatorTheme,r=t.activeIndicatorType,s=this.props.meta.lang,i=r.toLowerCase(),o=(0,c.get)(this.props.api,"indicators",[]).filter(function(e){return e.theme.length&&e.theme.find(function(e){return e.type===i})}),m=(0,c.get)(M.window.t,[s,"projects_indicators"],{}),u={};o.forEach(function(e){e.theme.forEach(function(t){if(t.type===i){var a=t[s];if(!a)return;u[a]=u[a]||[],u[a].push(e)}})});var d=Object.keys(u).sort(R),p=n&&d.indexOf(n)>=0?n:d[0],h="en"===s?"name":"name_ar",f=(0,c.get)(u,p,[]).sort(function(e,t){return e[h]<t[h]?-1:1});return l.default.createElement("section",{className:"modal modal--large"},l.default.createElement("div",{className:"modal__inner modal__indicators"},l.default.createElement("button",{className:"modal__button-dismiss",title:"close",onClick:this.closeModal}),l.default.createElement("h1",{className:"inpage__title heading--deco heading--medium"},m.add," ",m[this.state.activeIndicatorType.toLowerCase()+"_dropdown"]),l.default.createElement("div",{className:"modal__instructions"},l.default.createElement("p",null,m.compare_indicators)),l.default.createElement("div",{className:"indicators--selected"},l.default.createElement("span",{className:"heading--label"},m.selected_indicators),a.map(function(t){return l.default.createElement("span",{className:"button--small button--tag",key:t,onClick:function(){return e.toggleSelectedIndicator(t)}},t)})),l.default.createElement("div",{className:"indicators__container"},l.default.createElement("div",{className:"indicators"},l.default.createElement("ul",null,d.length&&d.map(function(t){return l.default.createElement("li",{key:t,className:"list__item"+(t===p?" list__item--active":""),onClick:function(){return e.selectIndicatorSubType(t)}},t)}))),l.default.createElement("div",{className:"indicators--options"},f.length&&f.map(function(t){var n=t[h];if(!n)return null;var r="subtypes-"+(0,T.default)(n);return l.default.createElement("label",{key:n,className:"form__option form__option--custom-checkbox"+(a.indexOf(n)>=0?" form__option--custom--checkbox--selected":"")},l.default.createElement("input",{type:"checkbox",name:"form-checkbox",checked:a.indexOf(n)>=0,id:r,value:n,onChange:function(){return e.toggleSelectedIndicator(n)}}),l.default.createElement("span",{className:"form__option__text"},n),l.default.createElement("span",{className:"form__option__ui"}),l.default.createElement("span",{className:"form__option__info","data-tip":(0,P.indicatorTooltipContent)(t)},"?"))}))),l.default.createElement("ul",{className:"button--list"},l.default.createElement("li",null,l.default.createElement("button",{onClick:this.confirmIndicators,type:"button",className:"button button--medium button--primary"},m.apply)),l.default.createElement("li",null,l.default.createElement("button",{onClick:this.cancelIndicators,type:"button",className:"button button--medium button--primary-bounded"},m.cancel)))))},renderActiveIndicators:function(e,t){var a=this,n=this.props.meta.lang,r=(0,c.get)(M.window.t,[n,"projects_indicators"],{});return l.default.createElement("div",{className:"indicator__overlay"},l.default.createElement("h1",{className:"heading--label"},r.selected_overlays),l.default.createElement("ul",{className:"indicator__overlay--list"},t.map(function(t){return l.default.createElement("li",{key:t,onClick:function(){return!0},className:"indicator__overlay--item"+(e===t?" indicator__overlay--selected":"")},l.default.createElement("button",{className:"indicator-toggle",onClick:function(){return a.setActiveIndicator(t)}},l.default.createElement("span",null,"toggle visibility")),l.default.createElement("span",{className:"indicator-layer-name"},t),l.default.createElement("span",{className:"form__option__info","data-tip":(0,P.indicatorTooltipContent)(a.props.api.indicators.find(function(e){return e.name===t||e.name_ar===t}))},"?"),l.default.createElement("button",{className:"indicator-close",onClick:function(){return a.removeActiveIndicator(t)}},l.default.createElement("span",null,"close indicator")))})))},renderProjectSelector:function(){var e=this,t=this.props.api.projects,a=this.props.meta.lang,n=this.state.selectedProjectFilters,r=(0,c.get)(M.window.t,[a,"projects_indicators"],{});return l.default.createElement("section",{className:"modal modal--large"},l.default.createElement("div",{className:"modal__inner modal__projects"},l.default.createElement("h1",{className:"inpage__title heading--deco heading--medium"},r.add_and_filter),l.default.createElement("div",{className:"modal__filters"},l.default.createElement("div",{className:"modal__filters--defaults"},l.default.createElement("label",{className:"form__option form__option--custom-checkbox"},l.default.createElement("input",{checked:!this.state.projectsHidden,type:"checkbox",name:"form-checkbox",id:"form-checkbox-1",onChange:this.toggleProjects,value:"All projects"}),l.default.createElement("span",{className:"form__option__text"},r.all_projects),l.default.createElement("span",{className:"form__option__ui"})),l.default.createElement("a",{onClick:this.resetProjectFilters,className:"link--secondary"},r.reset_filters)),B.map(function(s){return l.default.createElement("fieldset",{key:s.translationPath,className:"form__fieldset"},l.default.createElement("label",{className:"form__label"},r[s.translationPath]),l.default.createElement("div",{className:"form__group"},(Array.isArray(s.items)?s.items:s.items(t,a,r)).sort(function(e,t){return e.display<t.display?-1:1}).map(function(t){return l.default.createElement("label",{key:t.display,className:"form__option form__option--custom-checkbox "+(e.state.projectsHidden?"disabled":"")},l.default.createElement("input",{checked:!!n.find(function(e){return e.display===t.display}),type:"checkbox",name:"form-checkbox",value:t.display,onChange:function(){return e.toggleSelectedFilter(t)}}),l.default.createElement("span",{className:"form__option__text"},t.display),l.default.createElement("span",{className:"form__option__ui"}))})))}),l.default.createElement("ul",{className:"button--list"},l.default.createElement("li",null,l.default.createElement("button",{onClick:this.confirmFilters,type:"button",className:"button button--medium button--primary"},r.apply)),l.default.createElement("li",null,l.default.createElement("button",{onClick:this.cancelFilters,type:"button",className:"button button--medium button--primary-bounded"},r.cancel)))),l.default.createElement("button",{className:"modal__button-dismiss",title:"close",onClick:this.closeModal})))},render:function(){var e=this,t=this.props.meta.lang,a=void 0,n=(0,c.get)(this.state,"activeGovernorate.yem");if(n){a=(0,c.get)(this.props.api,"geography."+k.GOVERNORATE+".features",[]).find(function(e){return(0,c.get)(e,"properties.admin_id")===n})}var r=this.state,s=r.activeProjectFilters,i=r.activeIndicators,o=r.activeIndicator,m=[],u=[];this.state.projectsHidden||(m=this.props.api.projects,s.length&&s.forEach(function(e){m=m.filter(e.filter)}),u=(0,k.getProjectCentroids)(m,this.props.api.geography));var p=void 0,h=void 0,g=void 0;if(o){var b=this.props.api.indicators.find(function(e){return e.name===o||e.name_ar===o}),_=(0,c.get)(this.props.api,"indicatorDetail."+b.id);_&&(p=this.createOverlay(_)),_&&Array.isArray(_.data.data)&&(h=_.data.data.map(function(e){return{name:e.sub_nat_id,value:isNaN(e.data_value)?e.data_value:+e.data_value}}),g=[{title:o,data:h}])}var j=(0,c.get)(M.window.t,[t,"projects_indicators"],{});return l.default.createElement("section",{className:"inpage project-browse"},l.default.createElement("header",{className:"inpage__header"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"inpage__headline"},l.default.createElement("div",{className:"inpage__headline-actions"},l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement(v.default,{title:"All Projects",relatedProjects:m||this.props.api.projects,chartData:g,lang:t})),l.default.createElement("li",null,l.default.createElement(y.default,{lang:t})))),l.default.createElement("h1",{className:"inpage__title heading--deco heading--large"},j.projects_title),l.default.createElement("p",{className:"inpage__description"},j.projects_description)),l.default.createElement("div",{className:"inpage__actions"},l.default.createElement("div",{className:"actions-filters"},l.default.createElement("ul",{className:"button--list"},l.default.createElement("li",{onClick:this.openProjectSelector},l.default.createElement("button",{type:"button",className:"button button--medium button--primary"},j.filter_projects_btn)),l.default.createElement("li",null,l.default.createElement("span",{className:"dropdown__container",onBlur:this.closeIndicatorDropdown},l.default.createElement("button",{type:"button",onClick:this.openIndicatorDropdown,className:"button button--medium button--secondary drop__toggle--caret"},j.indicator_overlays_btn),this.state.indicatorToggle&&l.default.createElement("ul",{className:"drop__menu drop--align-left button--secondary"},O.map(function(t){var a=j[t+"_dropdown"];return l.default.createElement("li",{key:t,onClick:function(){return e.openIndicatorSelector(t)},className:"drop__menu-item"},a)}))))),s.length?l.default.createElement("div",{className:"filters"},l.default.createElement("label",{className:"heading--label"},"Filters"),s.map(function(t){return l.default.createElement("button",{onClick:function(){return e.removeActiveFilter(t)},key:t.display,className:"button button--small button--tag"},t.display)}),l.default.createElement("button",{onClick:this.clearProjectFilters,className:"button button--xsmall button--tag-unbounded"},"Clear Filters")):null),l.default.createElement("div",{className:"actions-toggle"},l.default.createElement("div",{className:"button-group button-group--horizontal button--toggle"},l.default.createElement("button",{onClick:this.selectMapView,className:this.state.listView?"button button--primary-bounded":"button button--primary"},j.map_toggle_btn),l.default.createElement("button",{onClick:this.selectListView,className:this.state.listView?"button button--primary":"button button--primary-bounded"},j.list_toggle_btn)))))),l.default.createElement("div",{className:"map__actions "+(this.state.listView?"hidden":"")},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"map__search-input"},l.default.createElement("div",{className:"autosuggest"},l.default.createElement(A.default,{suggestions:w.governorates,getDisplayName:function(e){return e.name},placeholder:j.search_text,onSelect:this.zoomToGovernorate})),l.default.createElement("span",{className:"form__input-group-button"},l.default.createElement("button",{type:"submit",className:"button button--primary button--text-hidden button--medium button--search-icon"},l.default.createElement("span",null,"Button")))))),this.state.listView?l.default.createElement("div",null,h&&l.default.createElement("div",{className:"inpage__body"},l.default.createElement("div",{className:"inner indicator-list"},l.default.createElement("section",{className:"inpage__section"},l.default.createElement("div",{className:"section__header"},l.default.createElement("h1",{className:"section__title"},"Indicators"),l.default.createElement("div",{className:"indicator-list-container"},i.length&&this.renderActiveIndicators(o,i),l.default.createElement(S.default,{data:h,margin:I,yTitle:"",lang:t})))))),l.default.createElement(E.default,{projects:m,meta:this.props.meta,lang:this.props.meta.lang})):l.default.createElement("div",{className:"map__outer"},l.default.createElement(f.default,{location:a,markers:u,overlay:p,lang:this.props.meta.lang}),i.length?this.renderActiveIndicators(o,i):null),this.state.modal&&"projects"===this.state.activeModal&&this.renderProjectSelector(),this.state.modal&&"indicators"===this.state.activeModal&&this.renderIndicatorSelector(),l.default.createElement(d.default,{html:!0,delayHide:500,effect:"solid"}))}});t.exports=(0,o.connect)(s)(q)},{"../actions":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/actions/index.js","../components/auto-suggest":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/auto-suggest.js","../components/charts/horizontal-bar":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/horizontal-bar.js","../components/csv-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/csv-btn.js","../components/map":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/map.js","../components/print-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/print-btn.js","../components/project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js","../components/project-list":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-list.js","../utils/governorates":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/governorates.js","../utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js","../utils/slugify":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js","../utils/tooltips":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/tooltips.js",global:"global",lodash:"lodash","object-path":"object-path",react:"react","react-redux":"react-redux","react-tooltip":"react-tooltip"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/project.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return l.default.resolve(e,t,(0,g.default)(a))}function s(e){return{api:e.api,meta:e.meta}}var i=e("path"),l=n(i),o=e("react"),c=n(o),m=e("react-router"),u=e("react-redux"),d=e("object-path"),p=e("lodash"),h=e("../actions"),f=e("../utils/slugify"),g=n(f),y=e("../utils/date"),b=e("../utils/format"),v=e("../utils/auth"),_=e("../utils/map-utils"),E=e("../utils/location"),j=n(E),A=e("../utils/accessors"),N=e("global"),w=e("../components/map"),k=n(w),x=e("../components/share"),T=n(x),P=e("../components/project-card"),C=n(P),S=e("../components/project-timeline"),M=n(S),O=e("../components/charts/horizontal-bar"),I=n(O),D=e("../components/print-btn"),R=n(D),L=e("../components/csv-btn"),F=n(L),z={left:150,right:20,top:10,bottom:50},H=c.default.createClass({displayName:"Project",propTypes:{params:c.default.PropTypes.object,dispatch:c.default.PropTypes.func,location:c.default.PropTypes.object,api:c.default.PropTypes.object,meta:c.default.PropTypes.object,lang:c.default.PropTypes.string},getInitialState:function(){return{authenticated:(0,v.hasValidToken)()}},componentWillMount:function(){(0,v.hasValidToken)()&&this.setState({authenticated:!0}),this.props.dispatch((0,h.getProject)(this.props.params.id))},componentWillReceiveProps:function(e){!e.api.authenticated||this.props.api.authenticated||this.state.authenticated?e.params.id!==this.props.params.id&&this.props.dispatch((0,h.getProject)(e.params.id)):(this.props.dispatch((0,h.getProject)(this.props.params.id)),this.setState({authenticated:!0}))},render:function(){var e=this.props.api.authenticated,t=(0,d.get)(this.props.api,["projectDetail",this.props.params.id]);if(!t)return c.default.createElement("div",null);var a=t.data;a.id=t.id;var n=this.props.meta.lang,s="/"+n,i=C.default.isOntime(a),o=(0,y.formatDate)(t.updated_at,n)||"",u=(0,d.get)(a,"budget",[]).reduce(function(e,t){return e+(0,d.get)(t,"fund.amount",0)},0),h={loan:0,grant:0,"local contribution":0};(0,d.get)(a,"budget",[]).forEach(function(e){h[e.type.en.toLowerCase()]+=e.fund.amount});var f=(0,d.get)(this.props.api,"projects",[]),v=(0,d.get)(a,"sds_indicator",[]).join(","),E=f.filter(function(e){if(t.id===e.id)return!1;if(!Array.isArray(e.sds_indicators))return!1;for(var a=0;a<e.sds_indicators.length;++a)if(v.indexOf(e.sds_indicators[a])>=0)return!0;return!1}),w=(0,_.getProjectCentroids)([a],this.props.api.geography),x=(0,_.getFeatureCollection)(w),P=f.map(function(e){return{name:(0,A.getProjectName)(e,n),value:(0,d.get)(e,"budget",[]).reduce(function(e,t){return e+(0,d.get)(t,"fund.amount",0)},0),link:l.default.resolve(s,"projects",e.id),project:e}}).sort(function(e,t){return t.value>e.value?-1:1}),S=P.map(function(e){return{name:e.name,link:e.link,value:C.default.percentComplete(e.project)}}),O=P.map(function(e){return{name:e.name,link:e.link,value:+(0,d.get)(e.project,"number_served.number_served",0)}}),D=(0,d.get)(a,"budget",[]).map(function(e){return{name:(0,A.getDonorName)(e,n),link:r(s,"donor",e.donor_name),value:e.fund.amount}}).sort(function(e,t){return t.value>e.value?-1:1}),L=(0,d.get)(a,"disbursed",[]).map(function(e){return{name:(0,y.parseProjectDate)(e.date),donor:e.donor_name,type:e.type[n],value:e.fund.amount}}).sort(function(e,t){return e.name>t.name?1:-1}).map(function(e,t){return{name:e.donor+" - "+(0,y.formatDate)(e.name,n)+" ("+e.type+")",value:e.value}}),H=(0,d.get)(N.window.t,[n,"project_pages"],{}),B=[{title:"Funding By Donor (US Dollars)",data:D},{title:"Funding By Project",data:P},{title:"Percentage Complete",data:S},{title:"Beneficiaries Reached",data:O}],q="ar"===n,U=q?a.name_ar:a.name,Y=q?a.local_manager_ar:a.local_manager,W=q?a.description_ar:a.description,G=q?a.number_served.number_served_unit_ar:a.number_served.number_served_unit;return c.default.createElement("section",{className:"inpage"},c.default.createElement("header",{className:"inpage__header"},c.default.createElement("div",{className:"inner"},c.default.createElement("div",{className:"inpage__headline"},c.default.createElement("div",{className:"inpage__headline-actions"},c.default.createElement("ul",null,c.default.createElement("li",null,c.default.createElement(F.default,{title:a.name,relatedProjects:E,project:a,chartData:B,disbursement:L,kmiData:a.kmi,lang:n})),c.default.createElement("li",null,c.default.createElement(R.default,{lang:n})),c.default.createElement("li",null,c.default.createElement(T.default,{path:this.props.location.pathname,lang:n})))),c.default.createElement("dl",{className:"inpage-meta project--"+i},c.default.createElement("dt",{className:"inpage-meta__label visually-hidden"},"Type"),"closed"!==i?c.default.createElement("dd",{className:"inpage-meta__value inpage-meta__value--type"},a.status[n]):"",c.default.createElement("dt",{className:"inpage-meta__label visually-hidden"}),c.default.createElement("dd",{className:"inpage-meta__value inpage-meta__value--status"},H["status_"+i]),c.default.createElement("dt",{className:"inpage-meta__label"},H.last_update_title,": "),c.default.createElement("dd",{className:"inpage-meta__value"}," ",o)),c.default.createElement("h1",{className:"inpage__title heading--deco heading--large"},U)),a.contract_date&&c.default.createElement("dl",{className:"date-contract"},c.default.createElement("dt",{className:"timeline__headline heading-alt"},H.contract_date+":"),c.default.createElement("dd",null,""+(0,y.formatDate)(a.contract_date))),c.default.createElement(M.default,{project:a,lang:n}),c.default.createElement("div",{className:"tags"},c.default.createElement("div",{className:"tags__group"},c.default.createElement("p",{className:"tags__label"},H.categories_title,":"),c.default.createElement("div",{className:"inpage__subtitles"},(0,d.get)(a,"category",[]).map(function(e){return c.default.createElement("span",{key:e.en,className:"inpage__subtitle"},c.default.createElement(m.Link,{to:r(s,"category",e.en),className:"link--secondary",href:""},e[n])," ")}))),c.default.createElement("div",{className:"tags__group"},c.default.createElement("p",{className:"tags__label"},H.donors_title,":"),c.default.createElement("div",{className:"inpage__subtitles"},D.map(function(e){return c.default.createElement("span",{key:e.name,className:"inpage__subtitle"},c.default.createElement(m.Link,{to:e.link,className:"link--secondary",href:""},e.name)," ")})))))),c.default.createElement("div",{className:"inpage__body"},c.default.createElement("div",{className:"inner"},c.default.createElement("section",{className:"inpage__section inpage__section--overview"},c.default.createElement("h1",{className:"visually-hidden"},"Project Overview"),c.default.createElement("div",{className:"inpage__col--map"},c.default.createElement(k.default,{markers:w,location:x,lang:n})),c.default.createElement("div",{className:"inpage__col--content"},c.default.createElement("ul",{className:"inpage-stats"},c.default.createElement("li",{className:"num__internal--large"},(0,b.currency)((0,b.shortTally)(u)),c.default.createElement("small",null,H.funding_title),c.default.createElement("ul",{className:"num__internal"},c.default.createElement("li",null,(0,b.currency)((0,b.shortTally)(h.loan))," ",H.funding_loans_title),c.default.createElement("li",null,(0,b.currency)((0,b.shortTally)(h.grant))," ",H.funding_grants_title),c.default.createElement("li",null,(0,b.currency)((0,b.shortTally)(h["local contribution"]))," ",H.funding_local_title))),c.default.createElement("li",{className:"num__internal--large"},(0,b.tally)(a.number_served.number_served)," ",c.default.createElement("small",null,G))),c.default.createElement("div",{className:"inpage__overview-links"},c.default.createElement("h2",{className:"overview-item__title heading-alt"},H.objective_title),c.default.createElement("ul",null,c.default.createElement("li",null,W)),a.location&&c.default.createElement("div",{className:"overview-item"},c.default.createElement("h1",{className:"overview-item__title heading-alt"},H.location_title),c.default.createElement("div",{className:"link-list"},(0,d.get)(a,"location",[]).map(function(e,t){var r=(0,j.default)(e,n);if(r){var s=r.display;return c.default.createElement("span",{key:r.id},c.default.createElement("span",null,s||"--",t===a.location.length-1?"":", "))}}))),a.project_link&&c.default.createElement("div",{className:"overview-item"},c.default.createElement("h2",{className:"overview-item__title heading-alt"},H.project_link),c.default.createElement("ul",{className:"link-list"},c.default.createElement("li",null,c.default.createElement("a",{href:a.project_link,className:"link--primary"},c.default.createElement("span",null,H.view_documentation_title))))),a.responsible_ministry&&c.default.createElement("div",{className:"overview-item"},c.default.createElement("h2",{className:"overview-item__title heading-alt"},H.responsible_ministry_title),c.default.createElement("ul",{className:"link-list"},c.default.createElement("li",null,c.default.createElement("a",{href:"#/"+n+"/ministry/"+(0,g.default)(a.responsible_ministry.en),className:"link--primary"},c.default.createElement("span",null,a.responsible_ministry[n]))))),Y&&c.default.createElement("div",{className:"overview-item"},c.default.createElement("h2",{className:"overview-item__title heading-alt"},H.local_manager_title),c.default.createElement("ul",{className:"link-list"},c.default.createElement("li",null,c.default.createElement("a",{href:"#/"+n+"/owner/"+(0,g.default)(a.local_manager),className:"link--primary"},c.default.createElement("span",null,Y))))),a.components&&c.default.createElement("div",{className:"overview-item--alt"},c.default.createElement("h2",{className:"overview-item__title heading-alt"},H.kmi_components),c.default.createElement("ul",{className:"link-list"},(0,p.uniq)((0,d.get)(a,"components",[]).map(function(e){var t=e.component;return"ar"===n&&e.component_ar&&(t=e.component_ar||""),t.trim()})).map(function(e){return c.default.createElement("li",{key:e},c.default.createElement("span",null,e))}))),a.sdg_indicator&&c.default.createElement("div",{className:"overview-item--alt"},c.default.createElement("h2",{className:"overview-item__title heading-alt"},H.sdg_goals_title),c.default.createElement("ul",{className:"link-list"},(0,d.get)(a,"sdg_indicator",[]).map(function(e){return c.default.createElement("li",{key:e.en},c.default.createElement("span",null,e[n]))}))),a.recommendations&&c.default.createElement("div",{className:"overview-item--alt"},c.default.createElement("h2",{className:"overview-item__title heading-alt"},H.recommendations),c.default.createElement("p",null,q?a.recommendations_ar:a.recommendations))))),c.default.createElement("section",{className:"inpage__section inpage__section--charts"},c.default.createElement("div",{className:"overview-charts"},c.default.createElement("div",{className:"chart-content chart__inline--labels"+(e?"":" chart__block")},c.default.createElement("h3",null,H.funding_by_donor_title),c.default.createElement(I.default,{lang:n,data:D,margin:z,yTitle:"",xFormat:b.shortTally})),e&&L.length?c.default.createElement("div",{className:"chart-content chart__inline--labels"},c.default.createElement("h3",null,"Disbursement"),c.default.createElement(I.default,{data:L,margin:z,yTitle:"",xFormat:b.shortTally,lang:n})):null)),Array.isArray(a.kmi)&&a.kmi.length&&c.default.createElement("section",{className:"inpage__section inpage__section--indicators"},c.default.createElement("h1",{className:"section__title heading--small"},H.monitoring_indicators_title),c.default.createElement("table",{className:"inpage__table"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{className:"row-name"},H.component_title),c.default.createElement("th",{className:"row-kpi"},H.kpi_title),c.default.createElement("th",{className:"row-status"},H.status_title),c.default.createElement("th",{className:"row-target"},H.target_title),c.default.createElement("th",{className:"row-progress"},H.rate_title),c.default.createElement("th",{className:"row-date"},H.date_title))),c.default.createElement("tbody",null,a.kmi.map(function(e){var t=e.component,a=e.kpi;"ar"===n&&(e.component_ar&&(t=e.component_ar),e.kpi_ar&&(a=e.kpi_ar));var r=(0,g.default)(e.status.en);return c.default.createElement("tr",{key:a},c.default.createElement("td",{className:"cell-name"},t),c.default.createElement("td",null,a),c.default.createElement("td",{className:"project--"+r},c.default.createElement("p",{className:"activity-name"},e.status[n])),c.default.createElement("td",null,(0,b.tally)(e.target)),c.default.createElement("td",null,(0,b.tally)(e.current)),c.default.createElement("td",null,(0,y.formatSimpleDate)((0,y.parseProjectDate)(e.date))))})))),c.default.createElement("section",{className:"inpage__section inpage__section--comparison"},c.default.createElement("h1",{className:"section__title heading--small"},H.project_comparison_title),c.default.createElement("div",{className:"chart-content chart__inline--labels"},c.default.createElement("h3",null,H.comparison_chart_title1),c.default.createElement(I.default,{lang:n,data:P,margin:z,yTitle:"",xFormat:b.shortTally,yFormat:b.shortText,activeProject:U})),c.default.createElement("div",{className:"chart-content chart__inline--labels"},c.default.createElement("h3",null,H.comparison_chart_title2),c.default.createElement(I.default,{lang:n,data:S,margin:z,yTitle:"",xFormat:b.pct,yFormat:b.shortText,activeProject:U})),e?c.default.createElement("div",{className:"chart-content chart__inline--labels"},c.default.createElement("h3",null,H.comparision_chart_title3),c.default.createElement(I.default,{lang:n,data:O,margin:z,yTitle:"",xFormat:b.tally,yFormat:b.shortText,activeProject:U})):null))))}});t.exports=(0,u.connect)(s)(H)},{"../actions":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/actions/index.js","../components/charts/horizontal-bar":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/charts/horizontal-bar.js","../components/csv-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/csv-btn.js","../components/map":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/map.js","../components/print-btn":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/print-btn.js","../components/project-card":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-card.js","../components/project-timeline":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/project-timeline.js",
"../components/share":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/share.js","../utils/accessors":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/accessors.js","../utils/auth":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/auth.js","../utils/date":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/date.js","../utils/format":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/format.js","../utils/location":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/location.js","../utils/map-utils":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/map-utils.js","../utils/slugify":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/utils/slugify.js",global:"global",lodash:"lodash","object-path":"object-path",path:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/path-browserify/index.js",react:"react","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/views/uhoh.js":[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{api:e.api,meta:e.meta}}var s=e("react"),i=n(s),l=e("react-redux"),o=e("react-router"),c=e("../components/page-footer"),m=n(c),u=e("../components/page-header"),d=n(u),p=i.default.createClass({displayName:"UhOh",propTypes:{location:i.default.PropTypes.object,api:i.default.PropTypes.object,dispatch:i.default.PropTypes.func,meta:i.default.PropTypes.object},render:function(){return i.default.createElement("div",null,i.default.createElement(d.default,{location:this.props.location,dispatch:this.props.dispatch,authenticated:this.props.api.authenticated,lang:this.props.meta.lang||"en"}),i.default.createElement("div",{className:"error"},i.default.createElement("div",{className:"error-content"},i.default.createElement("h1",{className:"heading--xxlarge heading--deco"},"Page Not Found"),i.default.createElement("p",null,"We were not able to find the page you're looking for."),i.default.createElement(o.Link,{to:"/",className:"button button--primary button--large"},"Take Me Home"))),i.default.createElement(m.default,null))}});t.exports=(0,l.connect)(r)(p)},{"../components/page-footer":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/page-footer.js","../components/page-header":"/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/components/page-header.js",react:"react","react-redux":"react-redux","react-router":"react-router"}],"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/global/window.js":[function(e,t,a){(function(e){var a;a="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/path-browserify/index.js":[function(e,t,a){(function(e){function t(e,t){for(var a=0,n=e.length-1;n>=0;n--){var r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),a++):a&&(e.splice(n,1),a--)}if(t)for(;a--;a)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var a=[],n=0;n<e.length;n++)t(e[n],n,e)&&a.push(e[n]);return a}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return r.exec(e).slice(1)};a.resolve=function(){for(var a="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(a=i+"/"+a,r="/"===i.charAt(0))}return a=t(n(a.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+a||"."},a.normalize=function(e){var r=a.isAbsolute(e),s="/"===i(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},a.isAbsolute=function(e){return"/"===e.charAt(0)},a.join=function(){var e=Array.prototype.slice.call(arguments,0);return a.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},a.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var a=e.length-1;a>=0&&""===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=a.resolve(e).substr(1),t=a.resolve(t).substr(1);for(var r=n(e.split("/")),s=n(t.split("/")),i=Math.min(r.length,s.length),l=i,o=0;o<i;o++)if(r[o]!==s[o]){l=o;break}for(var c=[],o=l;o<r.length;o++)c.push("..");return c=c.concat(s.slice(l)),c.join("/")},a.sep="/",a.delimiter=":",a.dirname=function(e){var t=s(e),a=t[0],n=t[1];return a||n?(n&&(n=n.substr(0,n.length-1)),a+n):"."},a.basename=function(e,t){var a=s(e)[2];return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},a.extname=function(e){return s(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,e("_process"))},{_process:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/process/browser.js"}],"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/process/browser.js":[function(e,t,a){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function l(){g&&h&&(g=!1,h.length?f=h.concat(f):y=-1,f.length&&o())}function o(){if(!g){var e=s(l);g=!0;for(var t=f.length;t;){for(h=f,f=[];++y<t;)h&&h[y].run();y=-1,t=f.length}h=null,g=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function m(){}var u,d,p=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,f=[],g=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];f.push(new c(e,t)),1!==f.length||g||s(o)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=m,p.addListener=m,p.once=m,p.off=m,p.removeListener=m,p.removeAllListeners=m,p.emit=m,p.prependListener=m,p.prependOnceListener=m,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/punycode/punycode.js":[function(e,t,a){(function(e){!function(n){function r(e){throw new RangeError(O[e])}function s(e,t){for(var a=e.length,n=[];a--;)n[a]=t(e[a]);return n}function i(e,t){var a=e.split("@"),n="";return a.length>1&&(n=a[0]+"@",e=a[1]),e=e.replace(M,"."),n+s(e.split("."),t).join(".")}function l(e){for(var t,a,n=[],r=0,s=e.length;r<s;)t=e.charCodeAt(r++),t>=55296&&t<=56319&&r<s?(a=e.charCodeAt(r++),56320==(64512&a)?n.push(((1023&t)<<10)+(1023&a)+65536):(n.push(t),r--)):n.push(t);return n}function o(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=R(e>>>10&1023|55296),e=56320|1023&e),t+=R(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:j}function m(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function u(e,t,a){var n=0;for(e=a?D(e/k):e>>1,e+=D(e/t);e>I*N>>1;n+=j)e=D(e/I);return D(n+(I+1)*e/(e+w))}function d(e){var t,a,n,s,i,l,m,d,p,h,f=[],g=e.length,y=0,b=T,v=x;for(a=e.lastIndexOf(P),a<0&&(a=0),n=0;n<a;++n)e.charCodeAt(n)>=128&&r("not-basic"),f.push(e.charCodeAt(n));for(s=a>0?a+1:0;s<g;){for(i=y,l=1,m=j;s>=g&&r("invalid-input"),d=c(e.charCodeAt(s++)),(d>=j||d>D((E-y)/l))&&r("overflow"),y+=d*l,p=m<=v?A:m>=v+N?N:m-v,!(d<p);m+=j)h=j-p,l>D(E/h)&&r("overflow"),l*=h;t=f.length+1,v=u(y-i,t,0==i),D(y/t)>E-b&&r("overflow"),b+=D(y/t),y%=t,f.splice(y++,0,b)}return o(f)}function p(e){var t,a,n,s,i,o,c,d,p,h,f,g,y,b,v,_=[];for(e=l(e),g=e.length,t=T,a=0,i=x,o=0;o<g;++o)(f=e[o])<128&&_.push(R(f));for(n=s=_.length,s&&_.push(P);n<g;){for(c=E,o=0;o<g;++o)(f=e[o])>=t&&f<c&&(c=f);for(y=n+1,c-t>D((E-a)/y)&&r("overflow"),a+=(c-t)*y,t=c,o=0;o<g;++o)if(f=e[o],f<t&&++a>E&&r("overflow"),f==t){for(d=a,p=j;h=p<=i?A:p>=i+N?N:p-i,!(d<h);p+=j)v=d-h,b=j-h,_.push(R(m(h+v%b,0))),d=D(v/b);_.push(R(m(d,0))),i=u(a,y,n==s),a=0,++n}++a,++t}return _.join("")}function h(e){return i(e,function(e){return C.test(e)?d(e.slice(4).toLowerCase()):e})}function f(e){return i(e,function(e){return S.test(e)?"xn--"+p(e):e})}var g="object"==typeof a&&a&&!a.nodeType&&a,y="object"==typeof t&&t&&!t.nodeType&&t,b="object"==typeof e&&e;b.global!==b&&b.window!==b&&b.self!==b||(n=b);var v,_,E=2147483647,j=36,A=1,N=26,w=38,k=700,x=72,T=128,P="-",C=/^xn--/,S=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=j-A,D=Math.floor,R=String.fromCharCode;if(v={version:"1.4.1",ucs2:{decode:l,encode:o},decode:d,encode:p,toASCII:f,toUnicode:h},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return v});else if(g&&y)if(t.exports==g)y.exports=v;else for(_ in v)v.hasOwnProperty(_)&&(g[_]=v[_]);else n.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/querystring-es3/decode.js":[function(e,t,a){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,a,s){t=t||"&",a=a||"=";var i={};if("string"!=typeof e||0===e.length)return i;var l=/\+/g;e=e.split(t);var o=1e3;s&&"number"==typeof s.maxKeys&&(o=s.maxKeys);var c=e.length;o>0&&c>o&&(c=o);for(var m=0;m<c;++m){var u,d,p,h,f=e[m].replace(l,"%20"),g=f.indexOf(a);g>=0?(u=f.substr(0,g),d=f.substr(g+1)):(u=f,d=""),p=decodeURIComponent(u),h=decodeURIComponent(d),n(i,p)?r(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/querystring-es3/encode.js":[function(e,t,a){"use strict";function n(e,t){if(e.map)return e.map(t);for(var a=[],n=0;n<e.length;n++)a.push(t(e[n],n));return a}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,a,l){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?n(i(e),function(i){var l=encodeURIComponent(r(i))+a;return s(e[i])?n(e[i],function(e){return l+encodeURIComponent(r(e))}).join(t):l+encodeURIComponent(r(e[i]))}).join(t):l?encodeURIComponent(r(l))+a+encodeURIComponent(r(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t}},{}],"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/querystring-es3/index.js":[function(e,t,a){"use strict";a.decode=a.parse=e("./decode"),a.encode=a.stringify=e("./encode")},{"./decode":"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/querystring-es3/decode.js","./encode":"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/querystring-es3/encode.js"}],"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/url/url.js":[function(e,t,a){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(e,t,a){if(e&&c.isObject(e)&&e instanceof n)return e;var r=new n;return r.parse(e,t,a),r}function s(e){return c.isString(e)&&(e=r(e)),e instanceof n?e.format():n.prototype.format.call(e)}function i(e,t){return r(e,!1,!0).resolve(t)}function l(e,t){return e?r(e,!1,!0).resolveObject(t):t}var o=e("punycode"),c=e("./util");a.parse=r,a.resolve=i,a.resolveObject=l,a.format=s,a.Url=n;var m=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(p),f=["'"].concat(h),g=["%","/","?",";","#"].concat(f),y=["/","?","#"],b=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=e("querystring");n.prototype.parse=function(e,t,a){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),r=-1!==n&&n<e.indexOf("#")?"?":"#",s=e.split(r),i=/\\/g;s[0]=s[0].replace(i,"/"),e=s.join(r);var l=e;if(l=l.trim(),!a&&1===e.split("#").length){var u=d.exec(l);if(u)return this.path=l,this.href=l,this.pathname=u[1],u[2]?(this.search=u[2],this.query=t?A.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=m.exec(l);if(p){p=p[0];var h=p.toLowerCase();this.protocol=h,l=l.substr(p.length)}if(a||p||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var N="//"===l.substr(0,2);!N||p&&E[p]||(l=l.substr(2),this.slashes=!0)}if(!E[p]&&(N||p&&!j[p])){for(var w=-1,k=0;k<y.length;k++){var x=l.indexOf(y[k]);-1!==x&&(-1===w||x<w)&&(w=x)}var T,P;P=-1===w?l.lastIndexOf("@"):l.lastIndexOf("@",w),-1!==P&&(T=l.slice(0,P),l=l.slice(P+1),this.auth=decodeURIComponent(T)),w=-1;for(var k=0;k<g.length;k++){var x=l.indexOf(g[k]);-1!==x&&(-1===w||x<w)&&(w=x)}-1===w&&(w=l.length),this.host=l.slice(0,w),l=l.slice(w),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var S=this.hostname.split(/\./),k=0,M=S.length;k<M;k++){var O=S[k];if(O&&!O.match(b)){for(var I="",D=0,R=O.length;D<R;D++)O.charCodeAt(D)>127?I+="x":I+=O[D];if(!I.match(b)){var L=S.slice(0,k),F=S.slice(k+1),z=O.match(v);z&&(L.push(z[1]),F.unshift(z[2])),F.length&&(l="/"+F.join(".")+l),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=o.toASCII(this.hostname));var H=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+H,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!_[h])for(var k=0,M=f.length;k<M;k++){var q=f[k];if(-1!==l.indexOf(q)){var U=encodeURIComponent(q);U===q&&(U=escape(q)),l=l.split(q).join(U)}}var Y=l.indexOf("#");-1!==Y&&(this.hash=l.substr(Y),l=l.slice(0,Y));var W=l.indexOf("?");if(-1!==W?(this.search=l.substr(W),this.query=l.substr(W+1),t&&(this.query=A.parse(this.query)),l=l.slice(0,W)):t&&(this.search="",this.query={}),l&&(this.pathname=l),j[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var H=this.pathname||"",G=this.search||"";this.path=H+G}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",a=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(s=A.stringify(this.query));var i=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||j[t])&&!1!==r?(r="//"+(r||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),i&&"?"!==i.charAt(0)&&(i="?"+i),a=a.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+r+a+i+n},n.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var a=new n,r=Object.keys(this),s=0;s<r.length;s++){var i=r[s];a[i]=this[i]}if(a.hash=e.hash,""===e.href)return a.href=a.format(),a;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),o=0;o<l.length;o++){var m=l[o];"protocol"!==m&&(a[m]=e[m])}return j[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(e.protocol&&e.protocol!==a.protocol){if(!j[e.protocol]){for(var u=Object.keys(e),d=0;d<u.length;d++){var p=u[d];a[p]=e[p]}return a.href=a.format(),a}if(a.protocol=e.protocol,e.host||E[e.protocol])a.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),a.pathname=h.join("/")}if(a.search=e.search,a.query=e.query,a.host=e.host||"",a.auth=e.auth,a.hostname=e.hostname||e.host,a.port=e.port,a.pathname||a.search){var f=a.pathname||"",g=a.search||"";a.path=f+g}return a.slashes=a.slashes||e.slashes,a.href=a.format(),a}var y=a.pathname&&"/"===a.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=b||y||a.host&&e.pathname,_=v,A=a.pathname&&a.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],N=a.protocol&&!j[a.protocol];if(N&&(a.hostname="",a.port=null,a.host&&(""===A[0]?A[0]=a.host:A.unshift(a.host)),a.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),v=v&&(""===h[0]||""===A[0])),b)a.host=e.host||""===e.host?e.host:a.host,a.hostname=e.hostname||""===e.hostname?e.hostname:a.hostname,a.search=e.search,a.query=e.query,A=h;else if(h.length)A||(A=[]),A.pop(),A=A.concat(h),a.search=e.search,a.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(N){a.hostname=a.host=A.shift();var w=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@");w&&(a.auth=w.shift(),a.host=a.hostname=w.shift())}return a.search=e.search,a.query=e.query,c.isNull(a.pathname)&&c.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a}if(!A.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var k=A.slice(-1)[0],x=(a.host||e.host||A.length>1)&&("."===k||".."===k)||""===k,T=0,P=A.length;P>=0;P--)k=A[P],"."===k?A.splice(P,1):".."===k?(A.splice(P,1),T++):T&&(A.splice(P,1),T--);if(!v&&!_)for(;T--;T)A.unshift("..");!v||""===A[0]||A[0]&&"/"===A[0].charAt(0)||A.unshift(""),x&&"/"!==A.join("/").substr(-1)&&A.push("");var C=""===A[0]||A[0]&&"/"===A[0].charAt(0);if(N){a.hostname=a.host=C?"":A.length?A.shift():"";var w=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@");w&&(a.auth=w.shift(),a.host=a.hostname=w.shift())}return v=v||a.host&&A.length,v&&!C&&A.unshift(""),A.length?a.pathname=A.join("/"):(a.pathname=null,a.path=null),c.isNull(a.pathname)&&c.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=e.auth||a.auth,a.slashes=a.slashes||e.slashes,a.href=a.format(),a},n.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/url/util.js",punycode:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/punycode/punycode.js",querystring:"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/querystring-es3/index.js"}],"/home/travis/build/map-yemen/map-yemen.github.io/node_modules/url/util.js":[function(e,t,a){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}]},{},["/home/travis/build/map-yemen/map-yemen.github.io/app/assets/scripts/main.js"]);